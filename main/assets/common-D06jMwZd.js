import{t as oe,d as ce}from"./index-CEnNTBDq.js";import{s as he}from"./index-BIkbbOxV.js";/*! typograf | © 2022 Denis Seleznev | MIT  License | https://github.com/typograf/typograf */function $(a){"@babel/helpers - typeof";return $=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$(a)}function L(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function F(a,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function S(a,r,e){return r&&F(a.prototype,r),e&&F(a,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function E(a,r){return fe(a)||de(a,r)||pe(a,r)||ge()}function fe(a){if(Array.isArray(a))return a}function de(a,r){var e=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(e!=null){var n=[],t=!0,u=!1,s,i;try{for(e=e.call(a);!(t=(s=e.next()).done)&&(n.push(s.value),!(r&&n.length===r));t=!0);}catch(l){u=!0,i=l}finally{try{!t&&e.return!=null&&e.return()}finally{if(u)throw i}}return n}}function pe(a,r){if(a){if(typeof a=="string")return N(a,r);var e=Object.prototype.toString.call(a).slice(8,-1);if(e==="Object"&&a.constructor&&(e=a.constructor.name),e==="Map"||e==="Set")return Array.from(a);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return N(a,r)}}function N(a,r){(r==null||r>a.length)&&(r=a.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=a[e];return n}function ge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var me={symbols:110,space:210,dash:310,punctuation:410,nbsp:510,number:610,money:710,date:810,other:910,optalign:1010,typo:1110,html:1210},ve=[["iexcl",161],["cent",162],["pound",163],["curren",164],["yen",165],["brvbar",166],["sect",167],["uml",168],["copy",169],["ordf",170],["laquo",171],["not",172],["reg",174],["macr",175],["deg",176],["plusmn",177],["sup2",178],["sup3",179],["acute",180],["micro",181],["para",182],["middot",183],["cedil",184],["sup1",185],["ordm",186],["raquo",187],["frac14",188],["frac12",189],["frac34",190],["iquest",191],["Agrave",192],["Aacute",193],["Acirc",194],["Atilde",195],["Auml",196],["Aring",197],["AElig",198],["Ccedil",199],["Egrave",200],["Eacute",201],["Ecirc",202],["Euml",203],["Igrave",204],["Iacute",205],["Icirc",206],["Iuml",207],["ETH",208],["Ntilde",209],["Ograve",210],["Oacute",211],["Ocirc",212],["Otilde",213],["Ouml",214],["times",215],["Oslash",216],["Ugrave",217],["Uacute",218],["Ucirc",219],["Uuml",220],["Yacute",221],["THORN",222],["szlig",223],["agrave",224],["aacute",225],["acirc",226],["atilde",227],["auml",228],["aring",229],["aelig",230],["ccedil",231],["egrave",232],["eacute",233],["ecirc",234],["euml",235],["igrave",236],["iacute",237],["icirc",238],["iuml",239],["eth",240],["ntilde",241],["ograve",242],["oacute",243],["ocirc",244],["otilde",245],["ouml",246],["divide",247],["oslash",248],["ugrave",249],["uacute",250],["ucirc",251],["uuml",252],["yacute",253],["thorn",254],["yuml",255],["fnof",402],["Alpha",913],["Beta",914],["Gamma",915],["Delta",916],["Epsilon",917],["Zeta",918],["Eta",919],["Theta",920],["Iota",921],["Kappa",922],["Lambda",923],["Mu",924],["Nu",925],["Xi",926],["Omicron",927],["Pi",928],["Rho",929],["Sigma",931],["Tau",932],["Upsilon",933],["Phi",934],["Chi",935],["Psi",936],["Omega",937],["alpha",945],["beta",946],["gamma",947],["delta",948],["epsilon",949],["zeta",950],["eta",951],["theta",952],["iota",953],["kappa",954],["lambda",955],["mu",956],["nu",957],["xi",958],["omicron",959],["pi",960],["rho",961],["sigmaf",962],["sigma",963],["tau",964],["upsilon",965],["phi",966],["chi",967],["psi",968],["omega",969],["thetasym",977],["upsih",978],["piv",982],["bull",8226],["hellip",8230],["prime",8242],["Prime",8243],["oline",8254],["frasl",8260],["weierp",8472],["image",8465],["real",8476],["trade",8482],["alefsym",8501],["larr",8592],["uarr",8593],["rarr",8594],["darr",8595],["harr",8596],["crarr",8629],["lArr",8656],["uArr",8657],["rArr",8658],["dArr",8659],["hArr",8660],["forall",8704],["part",8706],["exist",8707],["empty",8709],["nabla",8711],["isin",8712],["notin",8713],["ni",8715],["prod",8719],["sum",8721],["minus",8722],["lowast",8727],["radic",8730],["prop",8733],["infin",8734],["ang",8736],["and",8743],["or",8744],["cap",8745],["cup",8746],["int",8747],["there4",8756],["sim",8764],["cong",8773],["asymp",8776],["ne",8800],["equiv",8801],["le",8804],["ge",8805],["sub",8834],["sup",8835],["nsub",8836],["sube",8838],["supe",8839],["oplus",8853],["otimes",8855],["perp",8869],["sdot",8901],["lceil",8968],["rceil",8969],["lfloor",8970],["rfloor",8971],["lang",9001],["rang",9002],["spades",9824],["clubs",9827],["hearts",9829],["diams",9830],["loz",9674],["OElig",338],["oelig",339],["Scaron",352],["scaron",353],["Yuml",376],["circ",710],["tilde",732],["ndash",8211],["mdash",8212],["lsquo",8216],["rsquo",8217],["sbquo",8218],["ldquo",8220],["rdquo",8221],["bdquo",8222],["dagger",8224],["Dagger",8225],["permil",8240],["lsaquo",8249],["rsaquo",8250],["euro",8364],["NestedGreaterGreater",8811],["NestedLessLess",8810]],O=[["nbsp",160],["thinsp",8201],["ensp",8194],["emsp",8195],["shy",173],["zwnj",8204],["zwj",8205],["lrm",8206],["rlm",8207]],be=function(){function a(){L(this,a),this._entities=this._prepareEntities([].concat(ve,O)),this._entitiesByName={},this._entitiesByNameEntity={},this._entitiesByDigitEntity={},this._entitiesByUtf={},this._entities.forEach(function(r){this._entitiesByName[r.name]=r,this._entitiesByNameEntity[r.nameEntity]=r,this._entitiesByDigitEntity[r.digitEntity]=r,this._entitiesByUtf[r.utf]=r},this),this._invisibleEntities=this._prepareEntities(O)}return S(a,[{key:"toUtf",value:function(e){var n=this;e.text.search(/&#/)!==-1&&(e.text=this.decHexToUtf(e.text)),e.text.search(/&[a-z]/i)!==-1&&(e.text=e.text.replace(/&[a-z\d]{2,31};/gi,function(t){var u=n._entitiesByNameEntity[t];return u?u.utf:t}))}},{key:"decHexToUtf",value:function(e){return e.replace(/&#(\d{1,6});/gi,function(n,t){return String.fromCharCode(parseInt(t,10))}).replace(/&#x([\da-f]{1,6});/gi,function(n,t){return String.fromCharCode(parseInt(t,16))})}},{key:"restore",value:function(e){var n=e.prefs.htmlEntity,t=n.type,u=this._entities;(t==="name"||t==="digit")&&((n.onlyInvisible||n.list)&&(u=[],n.onlyInvisible&&(u=u.concat(this._invisibleEntities)),n.list&&(u=u.concat(this._prepareListParam(n.list)))),e.text=this._restoreEntitiesByIndex(e.text,t+"Entity",u))}},{key:"getByUtf",value:function(e,n){var t="";switch(n){case"digit":t=this._entitiesByDigitEntity[e];break;case"name":t=this._entitiesByNameEntity[e];break;default:t=e;break}return t}},{key:"_prepareEntities",value:function(e){var n=[];return e.forEach(function(t){var u=E(t,2),s=u[0],i=u[1],l=String.fromCharCode(i);n.push({name:s,nameEntity:"&"+s+";",digitEntity:"&#"+i+";",utf:l,reName:new RegExp("&"+s+";","g"),reUtf:new RegExp(l,"g")})},this),n}},{key:"_prepareListParam",value:function(e){var n=[];return e.forEach(function(t){var u=this._entitiesByName[t];u&&n.push(u)},this),n}},{key:"_restoreEntitiesByIndex",value:function(e,n,t){return t.forEach(function(u){e=e.replace(u.reUtf,u[n])}),e}}]),a}(),x=new be,R=[];function k(a){var r=(a||"").split("/")[0];r&&r!=="common"&&!C(r)&&(R.push(r),R.sort())}function J(){return R}function C(a){return a==="common"||R.indexOf(a)!==-1}function U(a,r){var e=a||r,n=e;return Array.isArray(e)||(n=[e]),n}var w={};function c(a){return w[a]}function ee(a,r){typeof a=="string"?(k(a),w[a]=r):$(a)==="object"&&Object.keys(a).forEach(function(e){k(e),w[e]=a[e]})}var $e=["a","abbr","acronym","b","bdo","big","br","button","cite","code","dfn","em","i","img","input","kbd","label","map","object","q","samp","script","select","small","span","strong","sub","sup","textarea","time","tt","var"],re=new RegExp("(https?|file|ftp)://([a-zA-Z0-9/+-=%&:_.~?]+[a-zA-Z0-9#+]*)","g"),j="\\d+([.,]\\d+)?",xe=/\d/;function H(a){return a.search(xe)>-1}var f="",_="",ye=function(){function a(){L(this,a);var r=[["<!--","-->"],["<!ENTITY",">"],["<!DOCTYPE",">"],["<\\?xml","\\?>"],["<!\\[CDATA\\[","\\]\\]>"]];["code","kbd","object","pre","samp","script","style","var"].forEach(function(e){r.push(["<"+e+"(\\s[^>]*?)?>","</"+e+">"])},this),this._tags={own:[],html:r.map(this._prepareRegExp),url:[re]},this._groups=["own","html","url"]}return S(a,[{key:"add",value:function(e){this._tags.own.push(this._prepareRegExp(e))}},{key:"show",value:function(e,n){for(var t=new RegExp(f+"tf\\d+"+f,"g"),u=new RegExp(f+"tf\\d"),s=function(h){return e.safeTags.hidden[n][h]||h},i=0,l=this._tags[n].length;i<l&&(e.text=e.text.replace(t,s),e.text.search(u)!==-1);i++);}},{key:"hide",value:function(e,n){e.safeTags=e.safeTags||{hidden:{},i:0},e.safeTags.hidden[n]={};var t=this._pasteLabel.bind(this,e,n);this._tags[n].forEach(function(u){e.text=e.text.replace(this._prepareRegExp(u),t)},this)}},{key:"hideHTMLTags",value:function(e){if(e.isHTML){var n=this._pasteLabel.bind(this,e,"html");e.text=e.text.replace(/<\/?[a-z][^]*?>/gi,n).replace(/&lt;\/?[a-z][^]*?&gt;/gi,n).replace(/&[gl]t;/gi,n)}}},{key:"getPrevLabel",value:function(e,n){for(var t=n-1;t>=0;t--)if(e[t]===f)return e.slice(t,n+1);return!1}},{key:"getNextLabel",value:function(e,n){for(var t=n+1;t<e.length;t++)if(e[t]===f)return e.slice(n,t+1);return!1}},{key:"getTagByLabel",value:function(e,n){var t=!1;return this._groups.some(function(u){var s=e.safeTags.hidden[u][n];return typeof s<"u"&&(t={group:u,value:s}),t}),t}},{key:"getTagInfo",value:function(e){if(e){var n={group:e.group};switch(e.group){case"html":n.name=e.value.split(/[<\s>]/)[1],n.isInline=$e.indexOf(n.name)>-1,n.isClosing=e.value.search(/^<\//)>-1;break;case"url":n.isInline=!0;break;case"own":n.isInline=!1;break}return n}}},{key:"_pasteLabel",value:function(e,n,t){var u=e.safeTags,s=f+"tf"+u.i+f;return u.hidden[n][s]=t,u.i++,s}},{key:"_prepareRegExp",value:function(e){var n;if(e instanceof RegExp)n=e;else{var t=E(e,3),u=t[0],s=t[1],i=t[2];typeof i>"u"&&(i="[^]*?"),n=new RegExp(u+i+s,"gi")}return n}}]),a}();function q(a,r){for(var e="";(r&1)===1&&(e+=a),r>>>=1,r!==0;)a+=a;return e}function ne(a){return a.replace(/\u00A0/g," ")}function D(a,r){for(var e=0;e<r.length;e++)a=a.replace(r[e][0],r[e][1]);return a}function Q(a){return a.search(/(<\/?[a-z]|<!|&[lg]t;)/i)!==-1}function _e(a){return a.replace(/\r\n?/g,`
`)}function Re(a,r){return r==="CRLF"?a.replace(/\n/g,`\r
`):r==="CR"?a.replace(/\n/g,"\r"):a}function y(a){return $(a)==="object"?JSON.parse(JSON.stringify(a)):a}var d=function(){function a(r){L(this,a),this._prefs=$(r)==="object"?r:{},this._prefs.locale=U(this._prefs.locale),this._prefs.live=this._prefs.live||!1,this._safeTags=new ye,this._settings={},this._enabledRules={},this._innerRulesByQueues={},this._innerRules=[].concat(this._innerRules),this._innerRules.forEach(function(e){var n=e.queue||"default";this._innerRulesByQueues[n]=this._innerRulesByQueues[n]||[],this._innerRulesByQueues[n].push(e)},this),this._rulesByQueues={},this._rules=[].concat(this._rules),this._rules.forEach(function(e){var n=e.queue||"default";this._prepareRule(e),this._rulesByQueues[n]=this._rulesByQueues[n]||[],this._rulesByQueues[n].push(e)},this),this._prefs.disableRule&&this.disableRule(this._prefs.disableRule),this._prefs.enableRule&&this.enableRule(this._prefs.enableRule),this._separatePartsTags=["title","p","h[1-6]","select","legend"]}return S(a,[{key:"execute",value:function(e,n){if(e=""+e,!e)return"";var t=this._prepareContext(e);return this._preparePrefs(t,n),this._process(t)}},{key:"_prepareContext",value:function(e){return{text:e,isHTML:Q(e),prefs:y(this._prefs),getData:function(t){return t==="char"?this.prefs.locale.map(function(u){return c(u+"/"+t)}).join(""):c(this.prefs.locale[0]+"/"+t)}}}},{key:"_preparePrefs",value:function(e,n){n=n||{};for(var t=e.prefs,u=0,s=["htmlEntity","lineEnding","processingSeparateParts","ruleFilter"];u<s.length;u++){var i=s[u];i in n?t[i]=n[i]:i in this._prefs&&(t[i]=this._prefs[i])}t.htmlEntity=t.htmlEntity||{},t.locale=U(n.locale,this._prefs.locale);var l=t.locale,o=l[0];if(!l.length||!o)throw Error('Not defined the property "locale".');if(!C(o))throw Error('"'+o+'" is not supported locale.')}},{key:"_splitBySeparateParts",value:function(e){if(!e.isHTML||e.prefs.processingSeparateParts===!1)return[e.text];var n=[],t=new RegExp("<("+this._separatePartsTags.join("|")+")(\\s[^>]*?)?>[^]*?</\\1>","gi"),u=0;return e.text.replace(t,function(s,i,l,o){return u!==o&&n.push((u?_:"")+e.text.slice(u,o)+_),n.push(s),u=o+s.length,s}),n.push(u?_+e.text.slice(u,e.text.length):e.text),n}},{key:"_process",value:function(e){var n=this;e.text=_e(e.text),this._executeRules(e,"start"),this._safeTags.hide(e,"own"),this._executeRules(e,"hide-safe-tags-own"),this._safeTags.hide(e,"html"),this._executeRules(e,"hide-safe-tags-html");var t=e.isHTML,u=new RegExp(_,"g");return e.text=this._splitBySeparateParts(e).map(function(s){return e.text=s,e.isHTML=Q(s),n._safeTags.hideHTMLTags(e),n._safeTags.hide(e,"url"),n._executeRules(e,"hide-safe-tags-url"),n._executeRules(e,"hide-safe-tags"),x.toUtf(e),n._prefs.live&&(e.text=ne(e.text)),n._executeRules(e,"utf"),n._executeRules(e),x.restore(e),n._executeRules(e,"html-entities"),n._safeTags.show(e,"url"),n._executeRules(e,"show-safe-tags-url"),e.text.replace(u,"")}).join(""),e.isHTML=t,this._safeTags.show(e,"html"),this._executeRules(e,"show-safe-tags-html"),this._safeTags.show(e,"own"),this._executeRules(e,"show-safe-tags-own"),this._executeRules(e,"end"),Re(e.text,e.prefs.lineEnding)}},{key:"getSetting",value:function(e,n){return this._settings[e]&&this._settings[e][n]}},{key:"setSetting",value:function(e,n,t){return this._settings[e]=this._settings[e]||{},this._settings[e][n]=t,this}},{key:"isEnabledRule",value:function(e){return this._enabledRules[e]}},{key:"isDisabledRule",value:function(e){return!this._enabledRules[e]}},{key:"enableRule",value:function(e){return this._enable(e,!0)}},{key:"disableRule",value:function(e){return this._enable(e,!1)}},{key:"addSafeTag",value:function(e,n,t){var u=e instanceof RegExp?e:[e,n,t];return this._safeTags.add(u),this}},{key:"_executeRules",value:function(e,n){n=n||"default";var t=this._rulesByQueues[n],u=this._innerRulesByQueues[n];u&&u.forEach(function(s){this._ruleIterator(e,s)},this),t&&t.forEach(function(s){this._ruleIterator(e,s)},this)}},{key:"_ruleIterator",value:function(e,n){var t=n._locale,u=this._prefs.live;if(!(u===!0&&n.live===!1||u===!1&&n.live===!0)&&(t==="common"||t===e.prefs.locale[0])&&this.isEnabledRule(n.name)){if(e.prefs.ruleFilter&&!e.prefs.ruleFilter(n))return;this._onBeforeRule&&this._onBeforeRule(n.name,e.text,e),e.text=n.handler.call(this,e.text,this._settings[n.name],e),this._onAfterRule&&this._onAfterRule(n.name,e.text,e)}}},{key:"_prepareRule",value:function(e){var n=e.name,t=$(e.settings),u={};t==="object"?u=y(e.settings):t==="function"&&(u=e.settings(e)),this._settings[n]=u,this._enabledRules[n]=e._enabled}},{key:"_enable",value:function(e,n){return Array.isArray(e)?e.forEach(function(t){this._enableByMask(t,n)},this):this._enableByMask(e,n),this}},{key:"_enableByMask",value:function(e,n){if(e)if(e.search(/\*/)!==-1){var t=new RegExp(e.replace(/\//g,"\\/").replace(/\*/g,".*"));this._rules.forEach(function(u){var s=u.name;t.test(s)&&(this._enabledRules[s]=n)},this)}else this._enabledRules[e]=n}},{key:"_getRule",value:function(e){var n=null;return this._rules.some(function(t){return t.name===e?(n=t,!0):!1}),n}}],[{key:"addRule",value:function(e){var n=e.name.split("/"),t=E(n,3),u=t[0],s=t[1],i=t[2];return e._enabled=e.disabled!==!0,e._locale=u,e._group=s,e._name=i,this.addLocale(e._locale),this._setIndex(e),this.prototype._rules.push(e),this._sortRules(this.prototype._rules),this}},{key:"addRules",value:function(e){var n=this;return e.forEach(function(t){n.addRule(t)}),this}},{key:"addInnerRule",value:function(e){return this.prototype._innerRules.push(e),e._locale=e.name.split("/")[0],this}},{key:"addInnerRules",value:function(e){var n=this;return e.forEach(function(t){n.addInnerRule(t)}),this}},{key:"_setIndex",value:function(e){var n=e.index,t=$(n),u=me[e._group];t==="undefined"?n=u:t==="string"&&(n=(u||0)+parseInt(e.index,10)),e._index=n}},{key:"_sortRules",value:function(e){e.sort(function(n,t){return n._index>t._index?1:-1})}}]),a}();d.version="6.15.1";d.addLocale=k;d.getLocales=J;d.hasLocale=C;d.setData=ee;d.getData=c;d.deepCopy=y;d.prototype._rules=[];d.prototype._innerRules=[];var Ee={"common/char":"a-z","common/dash":"--?|‒|–|—","common/quote":'«‹»›„“‟”"'},Ae={"be/char":"абвгдежзйклмнопрстуфхцчшыьэюяёіўґ","be/quote":{left:"«“",right:"»”"}},ke={"bg/char":"абвгдежзийклмнопрстуфхцчшщъьюя","bg/quote":{left:"„’",right:"“’"}},we={"ca/char":"abcdefghijlmnopqrstuvxyzàçèéíïòóúü","ca/quote":{left:"«“",right:"»”"}},qe={"cs/char":"a-záéíóúýčďěňřšťůž","cs/quote":{left:"„‚",right:"“‘"}},Te={"da/char":"a-zåæø","da/quote":{left:"»›",right:"«‹"}},Be={"de/char":"a-zßäöü","de/quote":{left:"„‚",right:"“‘"}},Le={"el/char":"ΐάέήίΰαβγδεζηθικλμνξοπρςστυφχψωϊϋόύώϲάέήίόύώ","el/quote":{left:"«“",right:"»”"}},Se={"en-GB/char":"a-z","en-GB/quote":{left:"‘“",right:"’”"}},Ce={"en-US/char":"a-z","en-US/quote":{left:"“‘",right:"”’"}},De={"eo/char":"abcdefghijklmnoprstuvzĉĝĥĵŝŭ","eo/quote":{left:"“‘",right:"”’"}},Ie={"es/char":"a-záéíñóúü","es/quote":{left:"«“",right:"»”"}},Me={"et/char":"abdefghijklmnoprstuvzäõöüšž","et/quote":{left:"„«",right:"“»"}},Pe={"fi/char":"abcdefghijklmnopqrstuvyöäå","fi/quote":{left:"”’",right:"”’"}},ze={"fr/char":"a-zàâçèéêëîïôûüœæ","fr/quote":{left:"«‹",right:"»›",spacing:!0}},Fe={"ga/char":"abcdefghilmnoprstuvwxyzáéíóú","ga/quote":{left:"“‘",right:"”’"}},Ne={"hu/char":"a-záäéíóöúüőű","hu/quote":{left:"„»",right:"”«"}},Oe={"it/char":"a-zàéèìòù","it/quote":{left:"«“",right:"»”"}},Ue={"lv/char":"abcdefghijklmnopqrstuvxzæœ","lv/quote":{left:"«„",right:"»“"}},je={"nl/char":"a-zäçèéêëîïñöûü","nl/quote":{left:"‘“",right:"’”"}},He={"no/char":"a-zåæèéêòóôø","no/quote":{left:"«’",right:"»’"}},Qe={"pl/char":"abcdefghijklmnoprstuvwxyzóąćęłńśźż","pl/quote":{left:"„«",right:"”»"}},We={"ro/char":"abcdefghijklmnoprstuvxzîășț","ro/quote":{left:"„«",right:"”»"}},Ge={"ru/char":"а-яё","ru/dashBefore":"(^| |\\n)","ru/dashAfter":"(?=[  ,.?:!]|$)","ru/dashAfterDe":"(?=[,.?:!]|[  ][^А-ЯЁ]|$)","ru/l":"а-яёa-z","ru/L":"А-ЯЁA-Z","ru/month":"январь|февраль|март|апрель|май|июнь|июль|август|сентябрь|октябрь|ноябрь|декабрь","ru/monthGenCase":"января|февраля|марта|апреля|мая|июня|июля|августа|сентября|октября|ноября|декабря","ru/monthPreCase":"январе|феврале|марте|апреле|мае|июне|июле|августе|сентябре|октябре|ноябре|декабре","ru/quote":{left:"«„‚",right:"»“‘",removeDuplicateQuotes:!0},"ru/shortMonth":"янв|фев|мар|апр|ма[ейя]|июн|июл|авг|сен|окт|ноя|дек","ru/weekday":"понедельник|вторник|среда|четверг|пятница|суббота|воскресенье"},Xe={"sk/char":"abcdefghijklmnoprstuvwxyzáäéíóôúýčďľňŕšťž","sk/quote":{left:"„‚",right:"“‘"}},Ke={"sl/char":"a-zčšž","sl/quote":{left:"„‚",right:"“‘"}},Ye={"sr/char":"abcdefghijklmnoprstuvzćčđšž","sr/quote":{left:"„’",right:"”’"}},Ze={"sv/char":"a-zäåéö","sv/quote":{left:"”’",right:"”’"}},Ve={"tr/char":"abcdefghijklmnoprstuvyzâçîöûüğış","tr/quote":{left:"“‘",right:"”’"}},Je={"uk/char":"абвгдежзийклмнопрстуфхцчшщьюяєіїґ","uk/quote":{left:"«„",right:"»“"}},er=[Ee,Ae,ke,we,qe,Te,Be,Le,Se,Ce,De,Ie,Me,Pe,ze,Fe,Ne,Oe,Ue,je,He,Qe,We,Ge,Xe,Ke,Ye,Ze,Ve,Je];er.forEach(function(a){return ee(a)});var rr={name:"common/html/e-mail",queue:"end",handler:function(r,e,n){return n.isHTML?r:r.replace(/(^|[\s;(])([\w\-.]{2,64})@([\w\-.]{2,64})\.([a-z]{2,64})([)\s.,!?]|$)/gi,'$1<a href="mailto:$2@$3.$4">$2@$3.$4</a>$5')},disabled:!0,htmlAttrs:!1},nr={name:"common/html/escape",index:"+100",queue:"end",handler:function(r){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return r.replace(/[&<>"'/]/g,function(n){return e[n]})},disabled:!0},ar={name:"common/html/nbr",index:"+10",queue:"end",handler:function(r){return r.replace(/([^\n>])\n(?=[^\n])/g,`$1<br/>
`)},disabled:!0,htmlAttrs:!1},tr=["address","article","aside","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","section","table","tfoot","ul","video"],ur={name:"common/html/p",index:"+5",queue:"end",handler:function(r){var e=new RegExp("<("+tr.join("|")+")[>\\s]"),n=`

`,t=r.split(n);return t.forEach(function(u,s,i){u.trim()&&(e.test(u)||(i[s]=u.replace(/^(\s*)/,"$1<p>").replace(/(\s*)$/,"</p>$1")))}),t.join(n)},disabled:!0,htmlAttrs:!1},sr={name:"common/html/processingAttrs",queue:"hide-safe-tags-own",handler:function(r,e,n){var t=this,u=new RegExp("(^|\\s)("+e.attrs.join("|")+`)=("[^"]*?"|'[^']*?')`,"gi"),s=y(n.prefs);return s.ruleFilter=function(i){return i.htmlAttrs!==!1},r.replace(/(<[-\w]+\s)([^>]+?)(?=>)/g,function(i,l,o){var h=o.replace(u,function(p,v,g,m){var b=m[0],ie=m[m.length-1],le=m.slice(1,-1);return v+g+"="+b+t.execute(le,s)+ie});return l+h})},settings:{attrs:["title","placeholder"]},disabled:!0,htmlAttrs:!1},ir={name:"common/html/quot",queue:"hide-safe-tags",handler:function(r){return r.replace(/&quot;/g,'"')}},lr={name:"common/html/stripTags",index:"+99",queue:"end",handler:function(r){return r.replace(/<[^>]+>/g,"")},disabled:!0},or={name:"common/html/url",queue:"end",handler:function(r,e,n){return n.isHTML?r:r.replace(re,function(t,u,s){s=s.replace(/([^/]+\/?)(\?|#)$/,"$1").replace(/^([^/]+)\/$/,"$1"),u==="http"?s=s.replace(/^([^/]+)(:80)([^\d]|\/|$)/,"$1$3"):u==="https"&&(s=s.replace(/^([^/]+)(:443)([^\d]|\/|$)/,"$1$3"));var i=s,l=u+"://"+s,o='<a href="'+l+'">';return u==="http"||u==="https"?(i=i.replace(/^www\./,""),o+(u==="http"?i:u+"://"+i)+"</a>"):o+l+"</a>"})},disabled:!0,htmlAttrs:!1};d.addRules([rr,nr,ar,ur,sr,ir,lr,or]);var cr={name:"common/nbsp/afterNumber",handler:function(r,e,n){var t="(^|\\s)(\\d{1,5}) (["+n.getData("char")+"]+)";return r.replace(new RegExp(t,"gi"),"$1$2 $3")},disabled:!0},hr={name:"common/nbsp/afterParagraphMark",handler:function(r){return r.replace(/¶ ?(?=\d)/g,"¶ ")}},fr={name:"common/nbsp/afterSectionMark",handler:function(r,e,n){var t=n.prefs.locale[0];return r.replace(/§[ \u00A0\u2009]?(?=\d|I|V|X)/g,t==="ru"?"§ ":"§ ")}},dr={name:"common/nbsp/afterShortWord",handler:function(r,e,n){var t=e.lengthShortWord,u="  ("+f+c("common/quote"),s="(^|["+u+"])(["+n.getData("char")+"]{1,"+t+"}) ",i="$1$2 ",l=new RegExp(s,"gim");return r.replace(l,i).replace(l,i)},settings:{lengthShortWord:2}},pr={name:"common/nbsp/beforeShortLastNumber",handler:function(r,e,n){var t=n.getData("char"),u=t.toUpperCase(),s=new RegExp("(["+t+u+"]) (?=\\d{1,"+e.lengthLastNumber+`}[-+−%'"`+n.getData("quote").right+")]?([.!?…]( ["+u+"]|$)|$))","gm");return r.replace(s,"$1 ")},live:!1,settings:{lengthLastNumber:2}},gr={name:"common/nbsp/beforeShortLastWord",handler:function(r,e,n){var t=n.getData("char"),u=t.toUpperCase(),s=new RegExp("(["+t+"\\d]) (["+t+u+"]{1,"+e.lengthLastWord+"}[.!?…])( ["+u+"]|$)","g");return r.replace(s,"$1 $2$3")},settings:{lengthLastWord:3}},mr={name:"common/nbsp/dpi",handler:function(r){return r.replace(/(\d) ?(lpi|dpi)(?!\w)/,"$1 $2")}};function W(a,r,e,n){return r+e.replace(/([^\u00A0])\u00A0([^\u00A0])/g,"$1 $2")+n}var vr={name:"common/nbsp/nowrap",queue:"end",handler:function(r){return r.replace(/(<nowrap>)(.*?)(<\/nowrap>)/g,W).replace(/(<nobr>)(.*?)(<\/nobr>)/g,W)}},br={name:"common/nbsp/replaceNbsp",queue:"utf",live:!1,handler:ne,disabled:!0};d.addRules([cr,hr,fr,dr,pr,gr,mr,vr,br]);var $r={name:"common/number/digitGrouping",index:"310",disabled:!0,handler:function(r,e){return r.replace(new RegExp("(^ ?|\\D |".concat(f,")(\\d{1,3}([    ]\\d{3})+)(?! ?[\\d-])"),"gm"),function(n,t,u){return t+u.replace(/\s/g,e.space)}).replace(/(\d{5,}([.,]\d+)?)/g,function(n,t){var u=t.match(/[.,]/),s=u?t.split(u):[t],i=E(s,2),l=i[0],o=i[1];return l=l.replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1"+e.space),u?l+u+o:l})},settings:{space:" "}},xr={name:"common/number/fraction",handler:function(r){return r.replace(/(^|\D)1\/2(\D|$)/g,"$1½$2").replace(/(^|\D)1\/4(\D|$)/g,"$1¼$2").replace(/(^|\D)3\/4(\D|$)/g,"$1¾$2")}},yr={name:"common/number/mathSigns",handler:function(r){return D(r,[[/!=/g,"≠"],[/<=/g,"≤"],[/(^|[^=])>=/g,"$1≥"],[/<=>/g,"⇔"],[/<</g,"≪"],[/>>/g,"≫"],[/~=/g,"≅"],[/(^|[^+])\+-/g,"$1±"]])}},_r={name:"common/number/times",handler:function(r){return r.replace(/(\d)[ \u00A0]?[xх][ \u00A0]?(\d)/g,"$1×$2")}};d.addRules([$r,xr,yr,_r]);var Rr={name:"common/other/delBOM",queue:"start",index:-1,handler:function(r){return r.charCodeAt(0)===65279?r.slice(1):r}},Er={name:"common/other/repeatWord",handler:function(r,e,n){var t=`[;:,.?! 
`+c("common/quote")+"]",u=new RegExp("("+t+"|^)(["+n.getData("char")+"]{"+e.min+",}) \\2("+t+"|$)","gi");return r.replace(u,"$1$2$3")},settings:{min:2},disabled:!0};d.addRules([Rr,Er]);var Ar={name:"common/punctuation/apostrophe",handler:function(r,e,n){var t="(["+n.getData("char")+"])",u=new RegExp(t+"'"+t,"gi");return r.replace(u,"$1’$2")}},kr={name:"common/punctuation/delDoublePunctuation",handler:function(r){return r.replace(/(^|[^,]),,(?!,)/g,"$1,").replace(/(^|[^:])::(?!:)/g,"$1:").replace(/(^|[^!?.])\.\.(?!\.)/g,"$1.").replace(/(^|[^;]);;(?!;)/g,"$1;").replace(/(^|[^?])\?\?(?!\?)/g,"$1?")}},wr={name:"common/punctuation/hellip",handler:function(r,e,n){return n.prefs.locale[0]==="ru"?r.replace(/(^|[^.])\.{3,4}(?=[^.]|$)/g,"$1…"):r.replace(/(^|[^.])\.{3}(\.?)(?=[^.]|$)/g,"$1…$2")}},qr=2,Tr={bufferQuotes:{left:"",right:""},beforeLeft:` 
	 [(`,afterRight:` 
	 !?.:;#*,…)\\]`,process:function(r){var e=r.context.text,n=this.count(e);if(!n.total)return e;var t=r.settings,u=r.settings.left[0]===r.settings.right[0];return u&&(r.settings=y(r.settings),r.settings.left=this.bufferQuotes.left.slice(0,r.settings.left.length),r.settings.right=this.bufferQuotes.right.slice(0,r.settings.right.length)),r.settings.spacing&&(e=this.removeSpacing(e,r.settings)),e=this.set(e,r),r.settings.spacing&&(e=this.setSpacing(e,r.settings)),r.settings.removeDuplicateQuotes&&(e=this.removeDuplicates(e,r.settings)),u&&(e=this.returnOriginalQuotes(e,t,r.settings),r.settings=t),e},returnOriginalQuotes:function(r,e,n){for(var t={},u=0;u<n.left.length;u++)t[n.left[u]]=e.left[u],t[n.right[u]]=e.right[u];return r.replace(new RegExp("["+n.left+n.right+"]","g"),function(s){return t[s]})},count:function(r){var e={total:0};return r.replace(new RegExp("["+c("common/quote")+"]","g"),function(n){return e[n]||(e[n]=0),e[n]++,e.total++,n}),e},removeDuplicates:function(r,e){var n=e.left[0],t=e.left[1]||n,u=e.right[0];return n!==t?r:r.replace(new RegExp(n+n,"g"),n).replace(new RegExp(u+u,"g"),u)},removeSpacing:function(r,e){for(var n=0,t=e.left.length;n<t;n++){var u=e.left[n],s=e.right[n];r=r.replace(new RegExp(u+"([   ])","g"),u).replace(new RegExp("([   ])"+s,"g"),s)}return r},setSpacing:function(r,e){for(var n=0,t=e.left.length;n<t;n++){var u=e.left[n],s=e.right[n];r=r.replace(new RegExp(u+"([^ ])","g"),u+" $1").replace(new RegExp("([^ ])"+s,"g"),"$1 "+s)}return r},set:function(r,e){var n=c("common/quote"),t=e.settings.left[0],u=e.settings.left[1]||t,s=e.settings.right[0],i=new RegExp("(^|["+this.beforeLeft+"])(["+n+"]+)(?=[^\\s"+f+"])","gim"),l=new RegExp("([^\\s"+f+"])(["+n+"]+)(?=["+this.afterRight+"]|$)","gim");return r=r.replace(i,function(o,h,p){return h+q(t,p.length)}).replace(l,function(o,h,p){return h+q(s,p.length)}),r=this.setAboveTags(r,e),t!==u&&(r=this.setInner(r,e.settings)),r},setAboveTags:function(r,e){var n=this,t=c("common/quote"),u=e.settings.left[0],s=e.settings.right[0];return r.replace(new RegExp("(^|.)(["+t+"])(.|$)","gm"),function(i,l,o,h,p){if(l!==f&&h!==f)return i;if(l===f&&h===f)return o==='"'?l+n.getAboveTwoTags(r,p+1,e)+h:i;if(l===f){var v=n.afterRight.indexOf(h)>-1,g=n.getPrevTagInfo(r,p-1,e);return v&&g&&g.group==="html"?l+(g.isClosing?s:u)+h:l+(!h||v?s:u)+h}else{var m=n.beforeLeft.indexOf(l)>-1,b=n.getNextTagInfo(r,p+1,e);return m&&b&&b.group==="html"?l+(b.isClosing?s:u)+h:l+(!l||m?u:s)+h}})},getAboveTwoTags:function(r,e,n){var t=this.getPrevTagInfo(r,e,n),u=this.getNextTagInfo(r,e,n);if(t&&t.group==="html"){if(!t.isClosing)return n.settings.left[0];if(u&&u.isClosing&&t.isClosing)return n.settings.right[0]}return r[e]},getPrevTagInfo:function(r,e,n){var t=n.safeTags.getPrevLabel(r,e-1);if(t){var u=n.safeTags.getTagByLabel(n.context,t);if(u)return n.safeTags.getTagInfo(u)}return null},getNextTagInfo:function(r,e,n){var t=n.safeTags.getNextLabel(r,e+1);if(t){var u=n.safeTags.getTagByLabel(n.context,t);if(u)return n.safeTags.getTagInfo(u)}return null},setInner:function(r,e){for(var n=e.left[0],t=e.right[0],u=0,s=this.getMaxLevel(r,n,t,e.left.length),i=u,l="",o=0,h=r.length;o<h;o++){var p=r[o];p===n?(l+=e.left[i>s-1?s-1:i],i++,i>s&&(i=s)):p===t?(i--,i<u&&(i=u),l+=e.right[i]):(p==='"'&&(i=u),l+=p)}return l},getMaxLevel:function(r,e,n,t){var u=this.count(r);return u[e]===u[n]?t:Math.min(t,qr)}},Br={name:"common/punctuation/quote",handler:function(r,e,n){var t=n.prefs.locale[0],u=e[t];return u?Tr.process({context:n,settings:u,safeTags:this._safeTags}):r},settings:function(){var r={};return J().forEach(function(e){r[e]=y(c(e+"/quote"))}),r}},Lr={name:"common/punctuation/quoteLink",queue:"show-safe-tags-html",index:"+5",handler:function(r,e,n){var t=this.getSetting("common/punctuation/quote",n.prefs.locale[0]);if(!t)return r;var u=x.getByUtf(t.left[0]),s=x.getByUtf(t.right[0]),i=x.getByUtf(t.left[1]),l=x.getByUtf(t.right[1]);i=i?"|"+i:"",l=l?"|"+l:"";var o=new RegExp("(<[aA]\\s[^>]*?>)("+u+i+")([^]*?)("+s+l+")(</[aA]>)","g");return r.replace(o,"$2$1$3$5$4")}};d.addRules([Ar,kr,wr,Br,Lr]);var Sr={name:"common/space/beforeBracket",handler:function(r,e,n){var t=new RegExp("(["+n.getData("char")+".!?,;…)])\\(","gi");return r.replace(t,"$1 (")}},Cr={name:"common/space/bracket",handler:function(r){return r.replace(/(\() +/g,"(").replace(/ +\)/g,")")}},Dr={name:"common/space/delBeforePercent",handler:function(r){return r.replace(/(\d)( |\u00A0)(%|‰|‱)/g,"$1$3")}},Ir={name:"common/space/delBeforePunctuation",handler:function(r){return r.replace(/(^|[^!?:;,.…]) ([!?:;,])(?!\))/g,"$1$2")}},Mr={name:"common/space/delBetweenExclamationMarks",handler:function(r){return r.replace(/([!?]) (?=[!?])/g,"$1")}},Pr={name:"common/space/delBeforeDot",handler:function(r){return r.replace(/(^|[^!?:;,.…]) (\.|\.\.\.)(\s|$)/g,"$1$2$3")}},zr={name:"common/space/delLeadingBlanks",handler:function(r){return r.replace(/^[ \t]+/mg,"")},disabled:!0},Fr={name:"common/space/delRepeatN",index:"-1",handler:function(r,e){var n=e.maxConsecutiveLineBreaks,t=new RegExp(`
{`.concat(n+1,",}"),"g"),u=q(`
`,n);return r.replace(t,u)},settings:{maxConsecutiveLineBreaks:2}},Nr={name:"common/space/delRepeatSpace",index:"-1",handler:function(r){return r.replace(/([^\n \t])[ \t]{2,}(?![\n \t])/g,"$1 ")}},Or={name:"common/space/delTrailingBlanks",index:"-3",handler:function(r){return r.replace(/[ \t]+\n/g,`
`)}},Ur={name:"common/space/insertFinalNewline",live:!1,disabled:!0,queue:"end",handler:function(r){return r[r.length-1]===`
`?r:r+`
`}},jr={name:"common/space/replaceTab",index:"-5",handler:function(r){return r.replace(/\t/g,"    ")}},Hr={name:"common/space/squareBracket",handler:function(r){return r.replace(/(\[) +/g,"[").replace(/ +\]/g,"]")}},Qr={name:"common/space/trimLeft",index:"-4",handler:String.prototype.trimLeft?function(a){return a.trimLeft()}:function(a){return a.replace(/^[\s\uFEFF\xA0]+/g,"")}},Wr={name:"common/space/trimRight",index:"-3",live:!1,handler:String.prototype.trimRight?function(a){return a.trimRight()}:function(a){return a.replace(/[\s\uFEFF\xA0]+$/g,"")}},Gr=new RegExp('(\\D):([^)",:.?\\s\\/\\\\'+f+"])","g"),Xr={name:"common/space/afterColon",handler:function(r){return r.replace(Gr,"$1: $2")}},Kr=new RegExp('(.),([^)",:.?\\s\\/\\\\'+f+"])","g"),Yr={name:"common/space/afterComma",handler:function(r){return r.replace(Kr,function(e,n,t){return H(n)&&H(t)?e:n+", "+t})}},Zr=new RegExp("\\?([^).…!;?\\s[\\])"+f+c("common/quote")+"])","g"),Vr={name:"common/space/afterQuestionMark",handler:function(r){return r.replace(Zr,"? $1")}},Jr=new RegExp("!([^).…!;?\\s[\\])"+f+c("common/quote")+"])","g"),en={name:"common/space/afterExclamationMark",handler:function(r){return r.replace(Jr,"! $1")}},rn=new RegExp(";([^).…!;?\\s[\\])"+f+c("common/quote")+"])","g"),nn={name:"common/space/afterSemicolon",handler:function(r){return r.replace(rn,"; $1")}};d.addRules([Xr,Yr,Vr,en,nn,Sr,Cr,Pr,Dr,Ir,Mr,zr,Fr,Nr,Or,Ur,jr,Hr,Qr,Wr]);var an={name:"common/symbols/arrow",handler:function(r){return D(r,[[/(^|[^-])->(?!>)/g,"$1→"],[/(^|[^<])<-(?!-)/g,"$1←"]])}},tn={name:"common/symbols/cf",handler:function(r){var e=new RegExp('(^|[\\s(\\[+≈±−—–\\-])(\\d+(?:[.,]\\d+)?)[   ]?(C|F)([\\W\\s.,:!?")\\]]|$)',"mg");return r.replace(e,"$1$2 °$3$4")}},un={name:"common/symbols/copy",handler:function(r){return D(r,[[/\(r\)/gi,"®"],[/(copyright )?\((c|с)\)/gi,"©"],[/\(tm\)/gi,"™"]])}};d.addRules([an,tn,un]);var sn={name:"en-US/dash/main",index:"-5",handler:function(r){var e=c("common/dash"),n=" ",t="—",u="[ ".concat(n,"]"),s="[ ".concat(n,`
]`),i=new RegExp("".concat(u,"(").concat(e,")(").concat(s,")"),"g");return r.replace(i,"".concat(n).concat(t,"$2"))}};d.addRules([sn]);var ln={name:"ru/dash/centuries",handler:function(r,e){var n="("+c("common/dash")+")",t=new RegExp("(X|I|V)[ | ]?"+n+"[ | ]?(X|I|V)","g");return r.replace(t,"$1"+e.dash+"$3")},settings:{dash:"–"}},on={name:"ru/dash/daysMonth",handler:function(r,e){var n=new RegExp("(^|\\s)([123]?\\d)("+c("common/dash")+")([123]?\\d)[  ]("+c("ru/monthGenCase")+")","g");return r.replace(n,"$1$2"+e.dash+"$4 $5")},settings:{dash:"–"}},cn={name:"ru/dash/de",handler:function(r){var e=new RegExp("([a-яё]+) де"+c("ru/dashAfterDe"),"g");return r.replace(e,"$1-де")},disabled:!0},hn={name:"ru/dash/decade",handler:function(r,e){var n=new RegExp("(^|\\s)(\\d{3}|\\d)0("+c("common/dash")+")(\\d{3}|\\d)0(-е[  ])(?=г\\.?[  ]?г|год)","g");return r.replace(n,"$1$20"+e.dash+"$40$5")},settings:{dash:"–"}},fn={name:"ru/dash/directSpeech",handler:function(r){var e=c("common/dash"),n=new RegExp('(["»‘“,])[ | ]?('.concat(e,")[ | ]"),"g"),t=new RegExp("(^|".concat(f,")(").concat(e,")( | )"),"gm"),u=new RegExp("([.…?!])[  ](".concat(e,")[  ]"),"g");return r.replace(n,"$1 — ").replace(t,"$1— ").replace(u,"$1 — ")}},dn={name:"ru/dash/izpod",handler:function(r){var e=new RegExp(c("ru/dashBefore")+"(И|и)з под"+c("ru/dashAfter"),"g");return r.replace(e,"$1$2з-под")}},pn={name:"ru/dash/izza",handler:function(r){var e=new RegExp(c("ru/dashBefore")+"(И|и)з за"+c("ru/dashAfter"),"g");return r.replace(e,"$1$2з-за")}},gn={name:"ru/dash/ka",handler:function(r){var e=new RegExp("([a-яё]+) ка(сь)?"+c("ru/dashAfter"),"g");return r.replace(e,"$1-ка$2")}},mn={name:"ru/dash/koe",handler:function(r){var e=new RegExp(c("ru/dashBefore")+"([Кк]о[ей])\\s([а-яё]{3,})"+c("ru/dashAfter"),"g");return r.replace(e,"$1$2-$3")}},vn={name:"ru/dash/main",index:"-5",handler:function(r){var e=c("common/dash"),n=new RegExp("([  ])("+e+")([  \\n])","g");return r.replace(n," —$3")}},bn={name:"ru/dash/month",handler:function(r,e){var n="("+c("ru/month")+")",t="("+c("ru/monthPreCase")+")",u=c("common/dash"),s=new RegExp(n+" ?("+u+") ?"+n,"gi"),i=new RegExp(t+" ?("+u+") ?"+t,"gi"),l="$1"+e.dash+"$3";return r.replace(s,l).replace(i,l)},settings:{dash:"–"}},$n={name:"ru/dash/surname",handler:function(r){var e=new RegExp("([А-ЯЁ][а-яё]+)\\s-([а-яё]{1,3})(?![^а-яё]|$)","g");return r.replace(e,"$1 —$2")}},xn={name:"ru/dash/taki",handler:function(r){var e=new RegExp("(верно|довольно|опять|прямо|так|вс[её]|действительно|неужели)\\s(таки)"+c("ru/dashAfter"),"g");return r.replace(e,"$1-$2")}},yn={name:"ru/dash/time",handler:function(r,e){var n=new RegExp(c("ru/dashBefore")+"(\\d?\\d:[0-5]\\d)"+c("common/dash")+"(\\d?\\d:[0-5]\\d)"+c("ru/dashAfter"),"g");return r.replace(n,"$1$2"+e.dash+"$3")},settings:{dash:"–"}},_n={name:"ru/dash/to",handler:function(r){var e="[Оо]ткуда|[Кк]уда|[Гг]де|[Кк]огда|[Зз]ачем|[Пп]очему|[Кк]ак|[Кк]ако[ейм]|[Кк]акая|[Кк]аки[емх]|[Кк]акими|[Кк]акую|[Чч]то|[Чч]его|[Чч]е[йм]|[Чч]ьим?|[Кк]то|[Кк]ого|[Кк]ому|[Кк]ем",n=new RegExp("(^|[^А-ЯЁа-яё\\w])("+e+")( | -|- )(то|либо|нибудь)"+c("ru/dashAfter"),"g");return r.replace(n,function(t,u,s,i,l){var o=s+i+l;return o==="как то"||o==="Как то"?t:u+s+"-"+l})}},Rn={name:"ru/dash/kakto",handler:function(r){var e=new RegExp("(^|[^А-ЯЁа-яё\\w])([Кк]ак) то"+c("ru/dashAfter"),"g");return r.replace(e,"$1$2-то")}},En={name:"ru/dash/weekday",handler:function(r,e){var n="("+c("ru/weekday")+")",t=new RegExp(n+" ?("+c("common/dash")+") ?"+n,"gi");return r.replace(t,"$1"+e.dash+"$3")},settings:{dash:"–"}},An={name:"ru/dash/years",handler:function(r,e){var n=c("common/dash"),t=new RegExp("(\\D|^)(\\d{4})[  ]?("+n+")[  ]?(\\d{4})(?=[  ]?г)","g");return r.replace(t,function(u,s,i,l,o){return parseInt(i,10)<parseInt(o,10)?s+i+e.dash+o:u})},settings:{dash:"–"}};d.addRules([ln,on,cn,hn,fn,dn,pn,gn,mn,vn,bn,$n,xn,yn,_n,Rn,En,An]);var kn={name:"ru/date/fromISO",handler:function(r){var e="(-|\\.|\\/)",n="(-|\\/)",t=new RegExp("(^|\\D)(\\d{4})"+e+"(\\d{2})"+e+"(\\d{2})(\\D|$)","gi"),u=new RegExp("(^|\\D)(\\d{2})"+n+"(\\d{2})"+n+"(\\d{4})(\\D|$)","gi");return r.replace(t,"$1$6.$4.$2$7").replace(u,"$1$4.$2.$6$7")}},wn={name:"ru/date/weekday",handler:function(r){var e="( | )",n=c("ru/monthGenCase"),t=c("ru/weekday"),u=new RegExp("(\\d)"+e+"("+n+"),"+e+"("+t+")","gi");return r.replace(u,function(){var s=arguments;return s[1]+s[2]+s[3].toLowerCase()+","+s[4]+s[5].toLowerCase()})}};d.addRules([kn,wn]);var qn={name:"ru/money/currency",handler:function(r){var e="([$€¥Ұ£₤₽])",n="[    ]",t=new RegExp("(^|[\\D]{2})"+e+" ?("+j+"("+n+"\\d{3})*)("+n+"?(тыс\\.|млн|млрд|трлн))?","gm"),u=new RegExp("(^|[\\D])("+j+") ?"+e,"gm");return r.replace(t,function(s,i,l,o,h,p,v,g){return i+o+(g?" "+g:"")+" "+l}).replace(u,"$1$2 $4")},disabled:!0},Tn={name:"ru/money/ruble",handler:function(r){var e="$1 ₽",n="(\\d+)( | )?(р|руб)\\.",t=new RegExp("^"+n+"$","g"),u=new RegExp(n+"(?=[!?,:;])","g"),s=new RegExp(n+"(?=\\s+[A-ЯЁ])","g");return r.replace(t,e).replace(u,e).replace(s,e+".")},disabled:!0};d.addRules([qn,Tn]);var Bn={name:"ru/nbsp/abbr",handler:function(r){function e(t,u,s,i){return s==="дд"&&i==="мм"||["рф","ру","рус","орг","укр","бг","срб"].indexOf(i)>-1?t:u+s+". "+i+"."}var n=new RegExp("(^|\\s|".concat(f,")([а-яё]{1,3})\\. ?([а-яё]{1,3})\\."),"g");return r.replace(n,e).replace(n,e)}},Ln={name:"ru/nbsp/addr",handler:function(r){return r.replace(/(\s|^)(дом|д\.|кв\.|под\.|п-д) *(\d+)/gi,"$1$2 $3").replace(/(\s|^)(мкр-н|мк-н|мкр\.|мкрн)\s/gi,"$1$2 ").replace(/(\s|^)(эт\.) *(-?\d+)/gi,"$1$2 $3").replace(/(\s|^)(\d+) +этаж([^а-яё]|$)/gi,"$1$2 этаж$3").replace(/(\s|^)литер\s([А-Я]|$)/gi,"$1литер $2").replace(/(\s|^)(обл|кр|ст|пос|с|д|ул|пер|пр|пр-т|просп|пл|бул|б-р|наб|ш|туп|оф|комн?|уч|вл|влад|стр|кор)\. *([а-яёa-z\d]+)/gi,"$1$2. $3").replace(/(\D[ \u00A0]|^)г\. ?([А-ЯЁ])/gm,"$1г. $2")}},Sn={name:"ru/nbsp/afterNumberSign",handler:function(r){return r.replace(/№[ \u00A0\u2009]?(\d|п\/п)/g,"№ $1")}},Cn={name:"ru/nbsp/beforeParticle",index:"+5",handler:function(r){var e="(ли|ль|же|ж|бы|б)",n=new RegExp("([А-ЯЁа-яё]) "+e+'(?=[,;:?!"‘“»])',"g"),t=new RegExp("([А-ЯЁа-яё])[  ]"+e+"[  ]","g");return r.replace(n,"$1 $2").replace(t,"$1 $2 ")}},Dn={name:"ru/nbsp/centuries",handler:function(r){var e=c("common/dash"),n="(^|\\s)([VIX]+)",t='(?=[,;:?!"‘“»]|$)',u=new RegExp(n+"[  ]?в\\.?"+t,"gm"),s=new RegExp(n+"("+e+")([VIX]+)[  ]?в\\.?([  ]?в\\.?)?"+t,"gm");return r.replace(u,"$1$2 в.").replace(s,"$1$2$3$4 вв.")}},In={name:"ru/nbsp/dayMonth",handler:function(r){var e=new RegExp("(\\d{1,2}) ("+c("ru/shortMonth")+")","gi");return r.replace(e,"$1 $2")}},Mn={name:"ru/nbsp/initials",handler:function(r){var e="   ",n=c("ru/quote"),t=new RegExp("(^|["+e+n.left+f+'"])([А-ЯЁ])\\.['+e+"]?([А-ЯЁ])\\.["+e+"]?([А-ЯЁ][а-яё]+)","gm");return r.replace(t,"$1$2. $3. $4")}},Pn={name:"ru/nbsp/m",index:"+5",handler:function(r){var e=new RegExp("(^|[\\s,.\\("+f+"])(\\d+)[  ]?(мм?|см|км|дм|гм|mm?|km|cm|dm)([23²³])?([\\s\\).!?,;"+f+"]|$)","gm");return r.replace(e,function(n,t,u,s,i,l){var o={2:"²","²":"²",3:"³","³":"³","":""}[i||""];return t+u+" "+s+o+(l===" "?" ":l)})}},zn={name:"ru/nbsp/mln",handler:function(r){return r.replace(/(\d) ?(тыс|млн|млрд|трлн)(\.|\s|$)/gi,"$1 $2$3")}},Fn={name:"ru/nbsp/ooo",handler:function(r){return r.replace(/(^|[^a-яёA-ЯЁ])(ООО|ОАО|ЗАО|НИИ|ПБОЮЛ) /g,"$1$2 ")}},Nn={name:"ru/nbsp/page",handler:function(r){var e=new RegExp("(^|[)\\s"+f+"])(стр|гл|рис|илл?|ст|п|c)\\. *(\\d+)([\\s.,?!;:]|$)","gim");return r.replace(e,"$1$2. $3$4")}},On={name:"ru/nbsp/ps",handler:function(r){var e=new RegExp("(^|\\s|".concat(f,")[pз]\\.[  ]?([pз]\\.[  ]?)?[sы]\\.:? "),"gim");return r.replace(e,function(n,t,u){return t+(u?"P. P. S. ":"P. S. ")})}},Un={name:"ru/nbsp/rubleKopek",handler:function(r){return r.replace(/(\d) ?(?=(руб|коп)\.)/g,"$1 ")}},jn={name:"ru/nbsp/see",handler:function(r){var e=new RegExp("(^|\\s|".concat(f,"|\\()(см|им)\\.[  ]?([а-яё0-9a-z]+)([\\s.,?!]|$)"),"gi");return r.replace(e,function(n,t,u,s,i){return(t===" "?" ":t)+u+". "+s+i})}},Hn={name:"ru/nbsp/year",handler:function(r){return r.replace(/(^|\D)(\d{4}) ?г([ ,;.\n]|$)/g,"$1$2 г$3")}},Qn={name:"ru/nbsp/years",index:"+5",handler:function(r){var e=c("common/dash"),n=new RegExp("(^|\\D)(\\d{4})("+e+')(\\d{4})[  ]?г\\.?([  ]?г\\.)?(?=[,;:?!"‘“»\\s]|$)',"gm");return r.replace(n,"$1$2$3$4 гг.")}};d.addRules([Bn,Ln,Sn,Cn,Dn,In,Mn,Pn,zn,Fn,Nn,On,Un,jn,Hn,Qn]);var Wn={name:"ru/number/comma",handler:function(r){return r.replace(/(^|\s)(\d+)\.(\d+[\u00A0\u2009\u202F ]*?[%‰°×x])/gim,"$1$2,$3")}},Gn={name:"ru/number/ordinals",handler:function(r,e,n){var t=new RegExp("(\\d[%‰]?)-(ый|ой|ая|ое|ые|ым|ом|ых|ого|ому|ыми)(?!["+n.getData("char")+"])","g");return r.replace(t,function(u,s,i){var l={ой:"й",ый:"й",ая:"я",ое:"е",ые:"е",ым:"м",ом:"м",ых:"х",ого:"го",ому:"му",ыми:"ми"};return s+"-"+l[i]})}};d.addRules([Wn,Gn]);function A(a,r){var e=new RegExp('<span class="('+r.join("|")+')">([^]*?)</span>',"g");return a.replace(e,"$2")}function I(a,r){return a.replace(/<title>[^]*?<\/title>/i,function(e){return A(e,r)})}var ae=["typograf-oa-lbracket","typograf-oa-n-lbracket","typograf-oa-sp-lbracket"],M="ru/optalign/bracket",Xn={name:M,handler:function(r){return r.replace(/( |\u00A0)\(/g,'<span class="typograf-oa-sp-lbracket">$1</span><span class="typograf-oa-lbracket">(</span>').replace(/^\(/gm,'<span class="typograf-oa-n-lbracket">(</span>')},disabled:!0,htmlAttrs:!1},Kn={name:M,queue:"start",handler:function(r){return A(r,ae)}},Yn={name:M,queue:"end",handler:function(r){return I(r,ae)}},te=["typograf-oa-comma","typograf-oa-comma-sp"],P="ru/optalign/comma",Zn={name:P,handler:function(r,e,n){var t=new RegExp("(["+n.getData("char")+"\\d́]+), ","gi");return r.replace(t,'$1<span class="typograf-oa-comma">,</span><span class="typograf-oa-comma-sp"> </span>')},disabled:!0,htmlAttrs:!1},Vn={name:P,queue:"start",handler:function(r){return A(r,te)}},Jn={name:P,queue:"end",handler:function(r){return I(r,te)}},ue=["typograf-oa-lquote","typograf-oa-n-lquote","typograf-oa-sp-lquote"],z="ru/optalign/quote",ea={name:z,handler:function(r){var e=this.getSetting("common/punctuation/quote","ru"),n="(["+e.left[0]+(e.left[1]||"")+"])",t=new RegExp(`(^|

|`+f+")("+n+")","g"),u=new RegExp(`([^
`+f+`])([  
])(`+n+")","gi");return r.replace(t,'$1<span class="typograf-oa-n-lquote">$2</span>').replace(u,'$1<span class="typograf-oa-sp-lquote">$2</span><span class="typograf-oa-lquote">$3</span>')},disabled:!0,htmlAttrs:!1},ra={name:z,queue:"start",handler:function(r){return A(r,ue)}},na={name:z,queue:"end",handler:function(r){return I(r,ue)}};d.addRules([Xn,Zn,ea]);d.addInnerRules([Kn,Yn,Vn,Jn,ra,na]);var aa={name:"ru/other/accent",handler:function(r){return r.replace(/([а-яё])([АЕЁИОУЫЭЮЯ])([^А-ЯЁ\w]|$)/g,function(e,n,t,u){return n+t.toLowerCase()+"́"+u})},disabled:!0},G=5,X="7",T=[],ta=8,ua=2;[4162,416332,8512,851111,4722,4725,391379,8442,4732,4152,4154451,4154459,4154455,41544513,8142,8332,8612,8622,3525,812,8342,8152,3812,4862,3422,342633,8112,9142,8452,3432,3434,3435,4812,8432,8439,3822,4872,3412,3511,3512,3022,4112,4852,4855,3852,3854,8182,818,90,3472,4741,4764,4832,4922,8172,8202,8722,4932,493,3952,3951,3953,411533,4842,3842,3843,8212,4942,"39131-39179","39190-39199",391,4712,4742,8362,495,499,4966,4964,4967,498,8312,8313,3832,383612,3532,8412,4232,423370,423630,8632,8642,8482,4242,8672,8652,4752,4822,482502,4826300,3452,8422,4212,3466,3462,8712,8352,"901-934","936-939","950-953",958,"960-969","977-989","991-997",999].forEach(function(a){if(typeof a=="string")for(var r=a.split("-"),e=+r[0];e<=+r[1];e++)T.push(e);else T.push(a)});function K(a){var r=a[0],e="",n,t;if(a.length<8)return Y(a);if(a.length>10)if(r==="+")if(a[1]===X)n=!0,a=a.substr(2);else return a;else r==="8"&&(t=!0,a=a.substr(1));for(var u=ta;u>=ua;u--){var s=+a.substr(0,u);if(T.indexOf(s)>-1){e=a.substr(0,u),a=a.substr(u);break}}return e||(e=a.substr(0,G),a=a.substr(G)),(n?"+"+X+" ":"")+(t?"8 ":"")+sa(e)+" "+Y(a)}function sa(a){var r=+a,e=a.length,n=[a],t=!1;if(e>3)switch(e){case 4:n=[a.substr(0,2),a.substr(2,2)];break;case 5:n=[a.substr(0,3),a.substr(3,3)];break;case 6:n=[a.substr(0,2),a.substr(2,2),a.substr(4,2)];break}else t=r>900&&r<=999||r===495||r===499;return n=n.join("-"),t?n:"("+n+")"}function Y(a){var r="";return a.length%2&&(r=a[0],r+=a.length<=5?"-":"",a=a.substr(1,a.length-1)),r+a.split(/(?=(?:\d\d)+$)/).join("-")}function Z(a){return a.replace(/[^\d+]/g,"")}var ia={name:"ru/other/phone-number",live:!1,handler:function(r){var e=new RegExp("(^|,| |"+f+")(\\+7[\\d\\(\\)  -]{10,18})(?=,|;|"+f+"|$)","gm");return r.replace(e,function(n,t,u){var s=Z(u);return s.length===12?t+K(s):n}).replace(/(^|[^а-яё])([☎☏✆📠📞📱]|т\.|тел\.|ф\.|моб\.|факс|сотовый|мобильный|телефон)(:?\s*?)([+\d(][\d \u00A0\-()]{3,}\d)/gi,function(n,t,u,s,i){var l=Z(i);return l.length>=5?t+u+s+K(l):n})}};d.addRules([aa,ia]);var la={name:"ru/punctuation/ano",handler:function(r){var e=new RegExp("([^«„[(!?,:;\\-‒–—\\s"+f+"])(\\s+)(а|но)(?= | |\\n)","g");return r.replace(e,"$1,$2$3")}},oa={name:"ru/punctuation/exclamation",live:!1,handler:function(r){return r.replace(/(^|[^!])!{2}($|[^!])/gm,"$1!$2").replace(/(^|[^!])!{4}($|[^!])/gm,"$1!!!$2")}},ca={name:"ru/punctuation/exclamationQuestion",index:"+5",handler:function(r){var e=new RegExp("(^|[^!])!\\?([^?]|$)","g");return r.replace(e,"$1?!$2")}},ha={name:"ru/punctuation/hellipQuestion",handler:function(r){return r.replace(/(^|[^.])(\.\.\.|…),/g,"$1…").replace(/(!|\?)(\.\.\.|…)(?=[^.]|$)/g,"$1..")}};d.addRules([la,oa,ca,ha]);var fa={name:"ru/space/afterHellip",handler:function(r){return r.replace(/([а-яё])(\.\.\.|…)([А-ЯЁ])/g,"$1$2 $3").replace(/([?!]\.\.)([а-яёa-z])/gi,"$1 $2")}},da={name:"ru/space/year",handler:function(r,e,n){var t=new RegExp("(^| | )(\\d{3,4})(год([ауе]|ом)?)([^"+n.getData("char")+"]|$)","g");return r.replace(t,"$1$2 $3$5")}};d.addRules([fa,da]);var pa={name:"ru/symbols/NN",handler:function(r){return r.replace(/№№/g,"№")}};d.addRules([pa]);var se={A:"А",a:"а",B:"В",E:"Е",e:"е",K:"К",M:"М",H:"Н",O:"О",o:"о",P:"Р",p:"р",C:"С",c:"с",T:"Т",y:"у",X:"Х",x:"х"},ga=Object.keys(se).join(""),ma={name:"ru/typo/switchingKeyboardLayout",handler:function(r){var e=new RegExp("(["+ga+"]{1,3})(?=[А-ЯЁа-яё]+?)","g");return r.replace(e,function(n,t){for(var u="",s=0;s<t.length;s++)u+=se[t[s]];return u})}};d.addRules([ma]);const va=["br","b","i","strong","em","sup","sub","a","ul","ol","li"],ba={enabled:["common/nbsp/afterNumber","common/nbsp/afterParagraphMark"],disabled:["common/symbols/cf","ru/other/phone-number","common/space/afterColon","common/space/afterSemicolon"]},V={allowedTags:[],allowedAttributes:{}};function $a(a){const{disabled:r,enabled:e}=ba;e.forEach(n=>a.enableRule(n)),r.forEach(n=>a.disableRule(n))}function B(a,r="ru"){const e={ru:["ru","en-US"],en:["en-US","ru"]},n=new d({locale:e[r]||r,htmlEntity:{type:"name"}});return $a(n),n.execute(a)}function xa(a,r=V){return a&&he(a,r||V)}function ya(a,r,e=va){return a&&B(xa(a,{allowedTags:e}),r)}const _a=(a,r)=>{const{result:e}=oe(a??"",r);return e};function Ra(a,{lang:r,...e}){const n=_a(a,{lang:r,...e}),{html:t,title:u}=n;return{...n,html:B(t,r),title:u&&B(u,r)}}function Ea(a){function r(n,t){const u=n.pos,s=n.src.charCodeAt(u);if(t||s!==61)return!1;const i=n.scanDelims(n.pos,!0);let l=i.length;const o=String.fromCharCode(s);if(l<2)return!1;if(l%2){const h=n.push("text","",0);h.content=o,l--}for(let h=0;h<l;h+=2){const p=n.push("text","",0);p.content=o+o,!(!i.can_open&&!i.can_close)&&n.delimiters.push({marker:s,length:0,jump:h/2,token:n.tokens.length-1,end:-1,open:i.can_open,close:i.can_close})}return n.pos+=i.length,!0}function e(n,t){const u=[],s=t.length;for(let i=0;i<s;i++){const l=t[i];if(l.marker!==61||l.end===-1)continue;const o=t[l.end],h=n.tokens[l.token];h.type="mark_open",h.tag="mark",h.nesting=1,h.markup="==",h.content="";const p=n.tokens[o.token];p.type="mark_close",p.tag="mark",p.nesting=-1,p.markup="==",p.content="",n.tokens[o.token-1].type==="text"&&n.tokens[o.token-1].content==="="&&u.push(o.token-1)}for(;u.length;){const i=u.pop();let l=i+1;for(;l<n.tokens.length&&n.tokens[l].type==="mark_close";)l++;if(l--,i!==l){const o=n.tokens[l];n.tokens[l]=n.tokens[i],n.tokens[i]=o}}}a.inline.ruler.before("emphasis","mark",r),a.inline.ruler2.before("emphasis","mark",function(n){let t;const u=n.tokens_meta,s=(n.tokens_meta||[]).length;for(e(n,n.delimiters),t=0;t<s;t++)u[t]&&u[t].delimiters&&e(n,u[t].delimiters)})}const Aa=/\{#([a-zA-Z0-9\-_]+)\s+([^}]+)\}/,ka=(a,r)=>{const e=(r==null?void 0:r.pattern)??Aa;function n(t,u){const{src:s,pos:i}=t;e.lastIndex=i;const l=e.exec(s);if(!l||l.index!==i)return!1;const[o,h,p]=l,v=o.length;if(!u){const g=t.push("html_inline","",0);g.content=`<span id="${a.utils.escapeHtml(h)}">`;const m=t.push("text","",0);m.content=p;const b=t.push("html_inline","",0);b.content="</span>"}return t.pos+=v,!0}a.inline.ruler.before("text","custom_span",n)},Ta=a=>(r,e)=>e.map(n=>n&&(typeof n=="string"?r(n):{...n,...a.reduce((t,u)=>(n[u]&&(t[u]=r(n[u])),t),{})}));function Ba(a,r,e={}){const{plugins:n=[]}=e,{html:t}=Ra(r,{lang:a,plugins:[...ce,Ea,ka,...n]});return t}function La(a,r){return ya(r,a)}export{Ta as c,La as t,Ba as y};
