import{g as w,b as R,r as o,ab as k,R as v}from"./iframe-CNS0eWLh.js";import{d as x}from"./debounce-PLLzNbHn.js";import{i as _}from"./isSymbol-DYK90O57.js";import{_ as S}from"./_baseIteratee-Dk0JQGYV.js";import{g as B}from"./blocks-CKNnBYJ_.js";function $(n){return n&&n.length?n[0]:void 0}var z=$,L=z;const T=w(L);var I=_;function M(n,u,g){for(var i=-1,h=n.length;++i<h;){var l=n[i],a=u(l);if(a!=null&&(m===void 0?a===a&&!I(a):g(a,m)))var m=a,d=l}return d}var j=M;function A(n,u){return n<u}var O=A,W=j,D=S,F=O;function H(n,u){return n&&n.length?W(n,D(u),F):void 0}var Q=H;const G=w(Q),C=R("BalancedMasonry"),J=n=>{const{className:u,columnClassName:g,children:i=[],breakpointCols:h,qa:l}=n,a=B(l,"column"),{isServer:m}=o.useContext(k),d=o.useCallback(()=>{const e=Object.entries(h).sort(([t],[r])=>Number(r)-Number(t));let[,s]=T(e);if(m)return s;for(const[t,r]of e){const c=Number(t);(document==null?void 0:document.body.clientWidth)<=c&&(s=r)}return s},[h,m]),[f,y]=o.useState(d()),[E,N]=o.useState([]),b=o.useRef(null),p=o.useCallback(x(()=>{if(!b.current)return;const e=[],s=[];for(let t=0;t<f;t++)s.push({id:t,height:0}),e.push([]);for(let t=0;t<b.current.children.length;t++){const r=b.current.children.item(t);if(!r)continue;const c=G(s,"height")||{id:0,height:0},{id:q}=c;e[q].push(i[t]),c.height+=r.offsetHeight}N(e)},300),[i,f]);return o.useEffect(()=>{p()},[p,i,f]),o.useEffect(()=>{const e=()=>y(d());return window.addEventListener("resize",e,{passive:!0}),()=>window.removeEventListener("resize",e)},[y,E,d]),o.useEffect(()=>{const e=b.current,s="ResizeObserver"in window;if(!e||!s)return()=>{};const t=new ResizeObserver(p);for(let r=0;r<e.children.length;r++){const c=e.children.item(r);c&&t.observe(c)}return()=>t.disconnect()},[p,i]),v.createElement("div",{className:C(null,u),"data-qa":l},v.createElement("div",{className:C("hidden-container"),style:{width:`${100/f}%`}},v.createElement("div",{ref:b,className:C("hidden-list")},i)),E.map((e,s)=>v.createElement("div",{key:s,className:g,style:{width:`${100/f}%`},"data-qa":a.column},e)))};J.__docgenInfo={description:"",methods:[],displayName:"BalancedMasonry",props:{qa:{required:!1,tsType:{name:"string"},description:""},className:{required:!0,tsType:{name:"string"},description:""},columnClassName:{required:!0,tsType:{name:"string"},description:""},children:{required:!0,tsType:{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"},description:""},breakpointCols:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    [key: number]: number;
}`,signature:{properties:[{key:{name:"number"},value:{name:"number",required:!0}}]}},description:""}}};export{J as B};
