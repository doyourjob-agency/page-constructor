import{R as h,aj as Me,ak as $,B as Be,al as je,am as S}from"./iframe-zMz54xqu.js";import{_ as Ce}from"./inheritsLoose-B6TuBNuE.js";import{u as Ke}from"./useUniqId-BYV-KVcK.js";import{K as Ue}from"./constants-BUPVgVv0.js";import{e as Ge}from"./EventBroker-4MFqs30S.js";function _e(){const r=h.useContext(Me);if(r===void 0)throw new Error("useTheme* hooks must be used within ThemeProvider");return r}function $e(r,e){typeof r=="function"?r(e):r&&(r.current=e)}function Ve(...r){return h.useMemo(()=>r.every(e=>e==null)?null:e=>{for(const n of r)$e(n,e)},r)}const we=h.createContext({current:null});we.displayName="PortalContext";function qe(){var r;const e=h.useContext(we);let n=null;return typeof window=="object"&&(n=window.document.body),(r=e.current)!==null&&r!==void 0?r:n}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Ne=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Y=Ne.join(","),Te=typeof Element>"u",I=Te?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Z=!Te&&Element.prototype.getRootNode?function(r){var e;return r==null||(e=r.getRootNode)===null||e===void 0?void 0:e.call(r)}:function(r){return r==null?void 0:r.ownerDocument},z=function r(e,n){var t;n===void 0&&(n=!0);var a=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"inert"),o=a===""||a==="true",i=o||n&&e&&r(e.parentNode);return i},We=function(e){var n,t=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return t===""||t==="true"},xe=function(e,n,t){if(z(e))return[];var a=Array.prototype.slice.apply(e.querySelectorAll(Y));return n&&I.call(e,Y)&&a.unshift(e),a=a.filter(t),a},Se=function r(e,n,t){for(var a=[],o=Array.from(e);o.length;){var i=o.shift();if(!z(i,!1))if(i.tagName==="SLOT"){var s=i.assignedElements(),u=s.length?s:i.children,d=r(u,!0,t);t.flatten?a.push.apply(a,d):a.push({scopeParent:i,candidates:d})}else{var v=I.call(i,Y);v&&t.filter(i)&&(n||!e.includes(i))&&a.push(i);var p=i.shadowRoot||typeof t.getShadowRoot=="function"&&t.getShadowRoot(i),E=!z(p,!1)&&(!t.shadowRootFilter||t.shadowRootFilter(i));if(p&&E){var F=r(p===!0?i.children:p.children,!0,t);t.flatten?a.push.apply(a,F):a.push({scopeParent:i,candidates:F})}else o.unshift.apply(o,i.children)}}return a},ke=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},A=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||We(e))&&!ke(e)?0:e.tabIndex},Xe=function(e,n){var t=A(e);return t<0&&n&&!ke(e)?0:t},He=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},De=function(e){return e.tagName==="INPUT"},Ye=function(e){return De(e)&&e.type==="hidden"},Ze=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(t){return t.tagName==="SUMMARY"});return n},ze=function(e,n){for(var t=0;t<e.length;t++)if(e[t].checked&&e[t].form===n)return e[t]},Je=function(e){if(!e.name)return!0;var n=e.form||Z(e),t=function(s){return n.querySelectorAll('input[type="radio"][name="'+s+'"]')},a;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")a=t(window.CSS.escape(e.name));else try{a=t(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=ze(a,e.form);return!o||o===e},Qe=function(e){return De(e)&&e.type==="radio"},et=function(e){return Qe(e)&&!Je(e)},tt=function(e){var n,t=e&&Z(e),a=(n=t)===null||n===void 0?void 0:n.host,o=!1;if(t&&t!==e){var i,s,u;for(o=!!((i=a)!==null&&i!==void 0&&(s=i.ownerDocument)!==null&&s!==void 0&&s.contains(a)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!o&&a;){var d,v,p;t=Z(a),a=(d=t)===null||d===void 0?void 0:d.host,o=!!((v=a)!==null&&v!==void 0&&(p=v.ownerDocument)!==null&&p!==void 0&&p.contains(a))}}return o},fe=function(e){var n=e.getBoundingClientRect(),t=n.width,a=n.height;return t===0&&a===0},nt=function(e,n){var t=n.displayCheck,a=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var o=I.call(e,"details>summary:first-of-type"),i=o?e.parentElement:e;if(I.call(i,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof a=="function"){for(var s=e;e;){var u=e.parentElement,d=Z(e);if(u&&!u.shadowRoot&&a(u)===!0)return fe(e);e.assignedSlot?e=e.assignedSlot:!u&&d!==e.ownerDocument?e=d.host:e=u}e=s}if(tt(e))return!e.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return fe(e);return!1},rt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var t=0;t<n.children.length;t++){var a=n.children.item(t);if(a.tagName==="LEGEND")return I.call(n,"fieldset[disabled] *")?!0:!a.contains(e)}return!0}n=n.parentElement}return!1},J=function(e,n){return!(n.disabled||z(n)||Ye(n)||nt(n,e)||Ze(n)||rt(n))},re=function(e,n){return!(et(n)||A(n)<0||!J(e,n))},at=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},it=function r(e){var n=[],t=[];return e.forEach(function(a,o){var i=!!a.scopeParent,s=i?a.scopeParent:a,u=Xe(s,i),d=i?r(a.candidates):s;u===0?i?n.push.apply(n,d):n.push(s):t.push({documentOrder:o,tabIndex:u,item:a,isScope:i,content:d})}),t.sort(He).reduce(function(a,o){return o.isScope?a.push.apply(a,o.content):a.push(o.content),a},[]).concat(n)},ot=function(e,n){n=n||{};var t;return n.getShadowRoot?t=Se([e],n.includeContainer,{filter:re.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:at}):t=xe(e,n.includeContainer,re.bind(null,n)),it(t)},st=function(e,n){n=n||{};var t;return n.getShadowRoot?t=Se([e],n.includeContainer,{filter:J.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):t=xe(e,n.includeContainer,J.bind(null,n)),t},k=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return I.call(e,Y)===!1?!1:re(n,e)},ut=Ne.concat("iframe").join(","),H=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return I.call(e,ut)===!1?!1:J(n,e)};function Rt({enabled:r,restoreFocusRef:e,focusTrapped:n}){const t=h.useRef(null),a=h.useRef(null),o=h.useRef(null),i=s=>{var u;r&&a.current===null&&(a.current=s.relatedTarget,o.current=a.current,t.current=(u=(e==null?void 0:e.current)||a.current)!==null&&u!==void 0?u:null)};return h.useEffect(()=>{if(!r)return;const s=d=>{const v=d.target;!n&&v instanceof HTMLElement&&k(v)&&(o.current=v)},u=d=>{const v=d.target;v instanceof HTMLElement&&k(v)?o.current=v:o.current=null};return window.addEventListener("focusin",s),window.addEventListener("mousedown",u),window.addEventListener("touchstart",u),()=>{window.removeEventListener("focusin",s),window.removeEventListener("mousedown",u),window.removeEventListener("touchstart",u)}},[r,n]),h.useEffect(()=>{var s;r?t.current=(s=(e==null?void 0:e.current)||a.current)!==null&&s!==void 0?s:null:t.current=null}),h.useEffect(()=>{if(r)return()=>{let s=t.current;const u=o.current;u&&document.contains(u)&&k(u)&&(s=u),s&&typeof s.focus=="function"&&document.contains(s)&&H(s)&&(s!==document.activeElement&&setTimeout(()=>{s==null||s.focus()},0),a.current=null,o.current=null)}},[r]),{onFocus:i}}function ae(){return ae=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},ae.apply(this,arguments)}function Fe(r,e){if(r==null)return{};var n={},t=Object.keys(r),a,o;for(o=0;o<t.length;o++)a=t[o],!(e.indexOf(a)>=0)&&(n[a]=r[a]);return n}function ct(r,e){return r.classList?!!e&&r.classList.contains(e):(" "+(r.className.baseVal||r.className)+" ").indexOf(" "+e+" ")!==-1}function lt(r,e){r.classList?r.classList.add(e):ct(r,e)||(typeof r.className=="string"?r.className=r.className+" "+e:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+e))}function ve(r,e){return r.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function dt(r,e){r.classList?r.classList.remove(e):typeof r.className=="string"?r.className=ve(r.className,e):r.setAttribute("class",ve(r.className&&r.className.baseVal||"",e))}const pe={disabled:!1},Re=h.createContext(null);var Le=function(e){return e.scrollTop},V="unmounted",O="exited",P="entering",j="entered",ie="exiting",D=function(r){Ce(e,r);function e(t,a){var o;o=r.call(this,t,a)||this;var i=a,s=i&&!i.isMounting?t.enter:t.appear,u;return o.appearStatus=null,t.in?s?(u=O,o.appearStatus=P):u=j:t.unmountOnExit||t.mountOnEnter?u=V:u=O,o.state={status:u},o.nextCallback=null,o}e.getDerivedStateFromProps=function(a,o){var i=a.in;return i&&o.status===V?{status:O}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var o=null;if(a!==this.props){var i=this.state.status;this.props.in?i!==P&&i!==j&&(o=P):(i===P||i===j)&&(o=ie)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,o,i,s;return o=i=s=a,a!=null&&typeof a!="number"&&(o=a.exit,i=a.enter,s=a.appear!==void 0?a.appear:i),{exit:o,enter:i,appear:s}},n.updateStatus=function(a,o){if(a===void 0&&(a=!1),o!==null)if(this.cancelNextCallback(),o===P){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:$.findDOMNode(this);i&&Le(i)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===O&&this.setState({status:V})},n.performEnter=function(a){var o=this,i=this.props.enter,s=this.context?this.context.isMounting:a,u=this.props.nodeRef?[s]:[$.findDOMNode(this),s],d=u[0],v=u[1],p=this.getTimeouts(),E=s?p.appear:p.enter;if(!a&&!i||pe.disabled){this.safeSetState({status:j},function(){o.props.onEntered(d)});return}this.props.onEnter(d,v),this.safeSetState({status:P},function(){o.props.onEntering(d,v),o.onTransitionEnd(E,function(){o.safeSetState({status:j},function(){o.props.onEntered(d,v)})})})},n.performExit=function(){var a=this,o=this.props.exit,i=this.getTimeouts(),s=this.props.nodeRef?void 0:$.findDOMNode(this);if(!o||pe.disabled){this.safeSetState({status:O},function(){a.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:ie},function(){a.props.onExiting(s),a.onTransitionEnd(i.exit,function(){a.safeSetState({status:O},function(){a.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,o){o=this.setNextCallback(o),this.setState(a,o)},n.setNextCallback=function(a){var o=this,i=!0;return this.nextCallback=function(s){i&&(i=!1,o.nextCallback=null,a(s))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},n.onTransitionEnd=function(a,o){this.setNextCallback(o);var i=this.props.nodeRef?this.props.nodeRef.current:$.findDOMNode(this),s=a==null&&!this.props.addEndListener;if(!i||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],d=u[0],v=u[1];this.props.addEndListener(d,v)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===V)return null;var o=this.props,i=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=Fe(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return h.createElement(Re.Provider,{value:null},typeof i=="function"?i(a,s):h.cloneElement(h.Children.only(i),s))},e}(h.Component);D.contextType=Re;D.propTypes={};function B(){}D.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:B,onEntering:B,onEntered:B,onExit:B,onExiting:B,onExited:B};D.UNMOUNTED=V;D.EXITED=O;D.ENTERING=P;D.ENTERED=j;D.EXITING=ie;var ft=function(e,n){return e&&n&&n.split(" ").forEach(function(t){return lt(e,t)})},ne=function(e,n){return e&&n&&n.split(" ").forEach(function(t){return dt(e,t)})},Oe=function(r){Ce(e,r);function e(){for(var t,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=r.call.apply(r,[this].concat(o))||this,t.appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(s,u){var d=t.resolveArguments(s,u),v=d[0],p=d[1];t.removeClasses(v,"exit"),t.addClass(v,p?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(s,u)},t.onEntering=function(s,u){var d=t.resolveArguments(s,u),v=d[0],p=d[1],E=p?"appear":"enter";t.addClass(v,E,"active"),t.props.onEntering&&t.props.onEntering(s,u)},t.onEntered=function(s,u){var d=t.resolveArguments(s,u),v=d[0],p=d[1],E=p?"appear":"enter";t.removeClasses(v,E),t.addClass(v,E,"done"),t.props.onEntered&&t.props.onEntered(s,u)},t.onExit=function(s){var u=t.resolveArguments(s),d=u[0];t.removeClasses(d,"appear"),t.removeClasses(d,"enter"),t.addClass(d,"exit","base"),t.props.onExit&&t.props.onExit(s)},t.onExiting=function(s){var u=t.resolveArguments(s),d=u[0];t.addClass(d,"exit","active"),t.props.onExiting&&t.props.onExiting(s)},t.onExited=function(s){var u=t.resolveArguments(s),d=u[0];t.removeClasses(d,"exit"),t.addClass(d,"exit","done"),t.props.onExited&&t.props.onExited(s)},t.resolveArguments=function(s,u){return t.props.nodeRef?[t.props.nodeRef.current,s]:[s,u]},t.getClassNames=function(s){var u=t.props.classNames,d=typeof u=="string",v=d&&u?u+"-":"",p=d?""+v+s:u[s],E=d?p+"-active":u[s+"Active"],F=d?p+"-done":u[s+"Done"];return{baseClassName:p,activeClassName:E,doneClassName:F}},t}var n=e.prototype;return n.addClass=function(a,o,i){var s=this.getClassNames(o)[i+"ClassName"],u=this.getClassNames("enter"),d=u.doneClassName;o==="appear"&&i==="done"&&d&&(s+=" "+d),i==="active"&&a&&Le(a),s&&(this.appliedClasses[o][i]=s,ft(a,s))},n.removeClasses=function(a,o){var i=this.appliedClasses[o],s=i.base,u=i.active,d=i.done;this.appliedClasses[o]={},s&&ne(a,s),u&&ne(a,u),d&&ne(a,d)},n.render=function(){var a=this.props;a.classNames;var o=Fe(a,["classNames"]);return h.createElement(D,ae({},o,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},e}(h.Component);Oe.defaultProps={classNames:""};Oe.propTypes={};const vt=Be("portal");function Lt({container:r,children:e,disablePortal:n}){const t=qe(),{scoped:a}=_e(),o=r??t;return n?h.createElement(h.Fragment,null,e):o?$.createPortal(a?h.createElement(je,{rootClassName:vt("theme-wrapper"),scoped:!0},e):e,o):null}/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function he(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),n.push.apply(n,t)}return n}function be(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?he(Object(n),!0).forEach(function(t){pt(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function pt(r,e,n){return e=bt(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ht(r,e){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function bt(r){var e=ht(r,"string");return typeof e=="symbol"?e:String(e)}var me={activateTrap:function(e,n){if(e.length>0){var t=e[e.length-1];t!==n&&t.pause()}var a=e.indexOf(n);a===-1||e.splice(a,1),e.push(n)},deactivateTrap:function(e,n){var t=e.indexOf(n);t!==-1&&e.splice(t,1),e.length>0&&e[e.length-1].unpause()}},mt=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},gt=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},q=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Et=function(e){return q(e)&&!e.shiftKey},yt=function(e){return q(e)&&e.shiftKey},ge=function(e){return setTimeout(e,0)},Ee=function(e,n){var t=-1;return e.every(function(a,o){return n(a)?(t=o,!1):!0}),t},_=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return typeof e=="function"?e.apply(void 0,t):e},X=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Ct=[],wt=function(e,n){var t=(n==null?void 0:n.document)||document,a=(n==null?void 0:n.trapStack)||Ct,o=be({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Et,isKeyBackward:yt},n),i={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},s,u=function(l,c,f){return l&&l[c]!==void 0?l[c]:o[f||c]},d=function(l,c){var f=typeof(c==null?void 0:c.composedPath)=="function"?c.composedPath():void 0;return i.containerGroups.findIndex(function(b){var m=b.container,C=b.tabbableNodes;return m.contains(l)||(f==null?void 0:f.includes(m))||C.find(function(w){return w===l})})},v=function(l){var c=o[l];if(typeof c=="function"){for(var f=arguments.length,b=new Array(f>1?f-1:0),m=1;m<f;m++)b[m-1]=arguments[m];c=c.apply(void 0,b)}if(c===!0&&(c=void 0),!c){if(c===void 0||c===!1)return c;throw new Error("`".concat(l,"` was specified but was not a node, or did not return a node"))}var C=c;if(typeof c=="string"&&(C=t.querySelector(c),!C))throw new Error("`".concat(l,"` as selector refers to no known node"));return C},p=function(){var l=v("initialFocus");if(l===!1)return!1;if(l===void 0||!H(l,o.tabbableOptions))if(d(t.activeElement)>=0)l=t.activeElement;else{var c=i.tabbableGroups[0],f=c&&c.firstTabbableNode;l=f||v("fallbackFocus")}if(!l)throw new Error("Your focus-trap needs to have at least one focusable element");return l},E=function(){if(i.containerGroups=i.containers.map(function(l){var c=ot(l,o.tabbableOptions),f=st(l,o.tabbableOptions),b=c.length>0?c[0]:void 0,m=c.length>0?c[c.length-1]:void 0,C=f.find(function(N){return k(N)}),w=f.slice().reverse().find(function(N){return k(N)}),T=!!c.find(function(N){return A(N)>0});return{container:l,tabbableNodes:c,focusableNodes:f,posTabIndexesFound:T,firstTabbableNode:b,lastTabbableNode:m,firstDomTabbableNode:C,lastDomTabbableNode:w,nextTabbableNode:function(L){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=c.indexOf(L);return R<0?U?f.slice(f.indexOf(L)+1).find(function(G){return k(G)}):f.slice(0,f.indexOf(L)).reverse().find(function(G){return k(G)}):c[R+(U?1:-1)]}}}),i.tabbableGroups=i.containerGroups.filter(function(l){return l.tabbableNodes.length>0}),i.tabbableGroups.length<=0&&!v("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(i.containerGroups.find(function(l){return l.posTabIndexesFound})&&i.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},F=function g(l){var c=l.activeElement;if(c)return c.shadowRoot&&c.shadowRoot.activeElement!==null?g(c.shadowRoot):c},y=function g(l){if(l!==!1&&l!==F(document)){if(!l||!l.focus){g(p());return}l.focus({preventScroll:!!o.preventScroll}),i.mostRecentlyFocusedNode=l,mt(l)&&l.select()}},x=function(l){var c=v("setReturnFocus",l);return c||(c===!1?!1:l)},M=function(l){var c=l.target,f=l.event,b=l.isBackward,m=b===void 0?!1:b;c=c||X(f),E();var C=null;if(i.tabbableGroups.length>0){var w=d(c,f),T=w>=0?i.containerGroups[w]:void 0;if(w<0)m?C=i.tabbableGroups[i.tabbableGroups.length-1].lastTabbableNode:C=i.tabbableGroups[0].firstTabbableNode;else if(m){var N=Ee(i.tabbableGroups,function(ee){var te=ee.firstTabbableNode;return c===te});if(N<0&&(T.container===c||H(c,o.tabbableOptions)&&!k(c,o.tabbableOptions)&&!T.nextTabbableNode(c,!1))&&(N=w),N>=0){var L=N===0?i.tabbableGroups.length-1:N-1,U=i.tabbableGroups[L];C=A(c)>=0?U.lastTabbableNode:U.lastDomTabbableNode}else q(f)||(C=T.nextTabbableNode(c,!1))}else{var R=Ee(i.tabbableGroups,function(ee){var te=ee.lastTabbableNode;return c===te});if(R<0&&(T.container===c||H(c,o.tabbableOptions)&&!k(c,o.tabbableOptions)&&!T.nextTabbableNode(c))&&(R=w),R>=0){var G=R===i.tabbableGroups.length-1?0:R+1,de=i.tabbableGroups[G];C=A(c)>=0?de.firstTabbableNode:de.firstDomTabbableNode}else q(f)||(C=T.nextTabbableNode(c))}}else C=v("fallbackFocus");return C},W=function(l){var c=X(l);if(!(d(c,l)>=0)){if(_(o.clickOutsideDeactivates,l)){s.deactivate({returnFocus:o.returnFocusOnDeactivate});return}_(o.allowOutsideClick,l)||l.preventDefault()}},oe=function(l){var c=X(l),f=d(c,l)>=0;if(f||c instanceof Document)f&&(i.mostRecentlyFocusedNode=c);else{l.stopImmediatePropagation();var b,m=!0;if(i.mostRecentlyFocusedNode)if(A(i.mostRecentlyFocusedNode)>0){var C=d(i.mostRecentlyFocusedNode),w=i.containerGroups[C].tabbableNodes;if(w.length>0){var T=w.findIndex(function(N){return N===i.mostRecentlyFocusedNode});T>=0&&(o.isKeyForward(i.recentNavEvent)?T+1<w.length&&(b=w[T+1],m=!1):T-1>=0&&(b=w[T-1],m=!1))}}else i.containerGroups.some(function(N){return N.tabbableNodes.some(function(L){return A(L)>0})})||(m=!1);else m=!1;m&&(b=M({target:i.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(i.recentNavEvent)})),y(b||i.mostRecentlyFocusedNode||p())}i.recentNavEvent=void 0},Ae=function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;i.recentNavEvent=l;var f=M({event:l,isBackward:c});f&&(q(l)&&l.preventDefault(),y(f))},se=function(l){if(gt(l)&&_(o.escapeDeactivates,l)!==!1){l.preventDefault(),s.deactivate();return}(o.isKeyForward(l)||o.isKeyBackward(l))&&Ae(l,o.isKeyBackward(l))},ue=function(l){var c=X(l);d(c,l)>=0||_(o.clickOutsideDeactivates,l)||_(o.allowOutsideClick,l)||(l.preventDefault(),l.stopImmediatePropagation())},ce=function(){if(i.active)return me.activateTrap(a,s),i.delayInitialFocusTimer=o.delayInitialFocus?ge(function(){y(p())}):y(p()),t.addEventListener("focusin",oe,!0),t.addEventListener("mousedown",W,{capture:!0,passive:!1}),t.addEventListener("touchstart",W,{capture:!0,passive:!1}),t.addEventListener("click",ue,{capture:!0,passive:!1}),t.addEventListener("keydown",se,{capture:!0,passive:!1}),s},le=function(){if(i.active)return t.removeEventListener("focusin",oe,!0),t.removeEventListener("mousedown",W,!0),t.removeEventListener("touchstart",W,!0),t.removeEventListener("click",ue,!0),t.removeEventListener("keydown",se,!0),s},Ie=function(l){var c=l.some(function(f){var b=Array.from(f.removedNodes);return b.some(function(m){return m===i.mostRecentlyFocusedNode})});c&&y(p())},Q=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Ie):void 0,K=function(){Q&&(Q.disconnect(),i.active&&!i.paused&&i.containers.map(function(l){Q.observe(l,{subtree:!0,childList:!0})}))};return s={get active(){return i.active},get paused(){return i.paused},activate:function(l){if(i.active)return this;var c=u(l,"onActivate"),f=u(l,"onPostActivate"),b=u(l,"checkCanFocusTrap");b||E(),i.active=!0,i.paused=!1,i.nodeFocusedBeforeActivation=t.activeElement,c==null||c();var m=function(){b&&E(),ce(),K(),f==null||f()};return b?(b(i.containers.concat()).then(m,m),this):(m(),this)},deactivate:function(l){if(!i.active)return this;var c=be({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},l);clearTimeout(i.delayInitialFocusTimer),i.delayInitialFocusTimer=void 0,le(),i.active=!1,i.paused=!1,K(),me.deactivateTrap(a,s);var f=u(c,"onDeactivate"),b=u(c,"onPostDeactivate"),m=u(c,"checkCanReturnFocus"),C=u(c,"returnFocus","returnFocusOnDeactivate");f==null||f();var w=function(){ge(function(){C&&y(x(i.nodeFocusedBeforeActivation)),b==null||b()})};return C&&m?(m(x(i.nodeFocusedBeforeActivation)).then(w,w),this):(w(),this)},pause:function(l){if(i.paused||!i.active)return this;var c=u(l,"onPause"),f=u(l,"onPostPause");return i.paused=!0,c==null||c(),le(),K(),f==null||f(),this},unpause:function(l){if(!i.paused||!i.active)return this;var c=u(l,"onUnpause"),f=u(l,"onPostUnpause");return i.paused=!1,c==null||c(),E(),ce(),K(),f==null||f(),this},updateContainerElements:function(l){var c=[].concat(l).filter(Boolean);return i.containers=c.map(function(f){return typeof f=="string"?t.querySelector(f):f}),i.active&&E(),K(),this}},s.updateContainerElements(e),s};const Pe=h.createContext(void 0);function Ot({children:r,enabled:e=!0,disableAutoFocus:n,autoFocus:t=!0}){const a=h.useRef(null),o=h.useRef(!n&&t);h.useEffect(()=>{o.current=!n&&t});const i=h.useRef(),s=h.useRef({}),u=h.useCallback(()=>{var y;(y=i.current)===null||y===void 0||y.updateContainerElements([a.current,...Object.values(s.current)])},[]),d=h.useMemo(()=>({addNode(y,x){var M;s.current[y]!==x&&!(!((M=a.current)===null||M===void 0)&&M.contains(x))&&(s.current[y]=x,u())},removeNode(y){s.current[y]&&(delete s.current[y],u())}}),[u]),v=h.useCallback(y=>{var x;e&&y?(a.current=y,i.current||(i.current=wt([],{initialFocus:()=>o.current&&Nt(y),fallbackFocus:()=>y,returnFocusOnDeactivate:!1,escapeDeactivates:!1,clickOutsideDeactivates:!1,allowOutsideClick:!0})),u(),i.current.activate()):((x=i.current)===null||x===void 0||x.deactivate(),a.current=null)},[e,u]),p=h.Children.only(r);if(!h.isValidElement(p))throw new Error("Children must contain only one valid element");const E=p.ref,F=Ve(v,E);return h.createElement(Pe.Provider,{value:d},h.cloneElement(p,{ref:F}))}function Pt(){const r=h.useContext(Pe),e=Ke();return h.useMemo(()=>{if(r)return n=>{n?r.addNode(e,n):r.removeNode(e)}},[r,e])}function Nt(r){return!(document.activeElement instanceof HTMLElement)||!r.contains(document.activeElement)?(r.hasAttribute("tabIndex")||r.setAttribute("tabIndex","-1"),r):document.activeElement}class Tt{constructor(){this.stack=[],this.handleDocumentKeyDown=e=>{var n,t,a;if(e.code===Ue.ESCAPE){const o=this.getTopLayer();o.disableEscapeKeyDown||((n=o.onEscapeKeyDown)===null||n===void 0||n.call(o,e),(t=o.onClose)===null||t===void 0||t.call(o,e,"escapeKeyDown"))}if(e.code==="Enter"){const o=this.getTopLayer();(a=o.onEnterKeyDown)===null||a===void 0||a.call(o,e)}},this.handleDocumentClick=e=>{var n,t;if(this.isToastClick(e))return;let a,o=null;if(this.mouseDownLayerTarget){if(a=this.mouseDownLayerTarget.layer,o=this.mouseDownLayerTarget.target,this.mouseDownLayerTarget=void 0,!this.stack.includes(a))return}else a=this.getTopLayer();!a.disableOutsideClick&&this.isOutsideClick(a,e,o)&&((n=a.onOutsideClick)===null||n===void 0||n.call(a,e),(t=a.onClose)===null||t===void 0||t.call(a,e,"outsideClick"))},this.handleDocumentMouseDown=e=>{const n=this.getTopLayer();n&&(this.mouseDownLayerTarget={layer:n,target:e.target})}}add(e){this.stack.push(e),this.stack.length===1&&this.addListeners(),this.notifyLayersChange()}remove(e){const n=this.stack.indexOf(e);this.stack.splice(n,1),this.stack.length===0&&this.removeListeners(),this.notifyLayersChange()}getLayersCount(){return this.stack.length}getLayers(){return this.stack.map(({type:e})=>({type:e}))}addListeners(){document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("click",this.handleDocumentClick,!0),document.addEventListener("mousedown",this.handleDocumentMouseDown,!0)}removeListeners(){document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("click",this.handleDocumentClick,!0),document.removeEventListener("mousedown",this.handleDocumentMouseDown,!0)}notifyLayersChange(){Ge.publish({componentId:"LayerManager",eventId:"layerschange",meta:{layersCount:this.getLayersCount(),layers:this.getLayers()}})}getTopLayer(){return this.stack[this.stack.length-1]}isOutsideClick(e,n,t=null){const a=e.contentRefs||[],{target:o}=n,i=typeof n.composedPath=="function"?n.composedPath():[];return a.length>0?!a.some(u=>{var d,v,p,E;return((v=(d=u==null?void 0:u.current)===null||d===void 0?void 0:d.contains)===null||v===void 0?void 0:v.call(d,o))||((E=(p=u==null?void 0:u.current)===null||p===void 0?void 0:p.contains)===null||E===void 0?void 0:E.call(p,t))||i.includes(u==null?void 0:u.current)}):!1}isToastClick(e){return(typeof e.composedPath=="function"?e.composedPath():[]).some(t=>{var a;return!!(!((a=t==null?void 0:t.dataset)===null||a===void 0)&&a.toast)})}}const ye=new Tt;function At({open:r,disableEscapeKeyDown:e,disableOutsideClick:n,onEscapeKeyDown:t,onEnterKeyDown:a,onOutsideClick:o,onClose:i,contentRefs:s,enabled:u=!0,type:d}){const v=h.useRef({disableEscapeKeyDown:e,disableOutsideClick:n,onEscapeKeyDown:t,onEnterKeyDown:a,onOutsideClick:o,onClose:i,contentRefs:s,type:d});h.useEffect(()=>{Object.assign(v.current,{disableEscapeKeyDown:e,disableOutsideClick:n,onEscapeKeyDown:t,onEnterKeyDown:a,onOutsideClick:o,onClose:i,contentRefs:s,enabled:u})},[e,n,t,a,o,i,s,u]),h.useEffect(()=>{if(r&&u){const p=v.current;return ye.add(p),()=>{ye.remove(p)}}},[r,u])}function It(r){return{appear:S(r({appear:!0})),appearActive:S(r({appear:"active"})),appearDone:S(r({appear:"done"})),enter:S(r({enter:!0})),enterActive:S(r({enter:"active"})),enterDone:S(r({enter:"done"})),exit:S(r({exit:!0})),exitActive:S(r({exit:"active"})),exitDone:S(r({exit:"done"}))}}export{Oe as C,Ot as F,Lt as P,Fe as _,At as a,_e as b,Ve as c,Pt as d,ae as e,It as g,Rt as u};
